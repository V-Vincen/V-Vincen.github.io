<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analytics、Baidu-Tongji)-->
<head>
  <!-- Google Analytics -->
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-164526897-1"></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'UA-164526897-1');
    </script>
  

  <!-- Baidu Tongji -->
  
    <script type="text/javascript">
      // Originial
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?49e5faf2bfd6c26c1eb20bad10ef10c7";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  <!-- Baidu Push -->
  
    <script>
      (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
  

  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <meta name="google-site-verification" content="lxDfCplOZbIzjhG34NuQBgu2gdyRlAtMB4utP5AgEBc"/>
  <meta name="baidu-site-verification" content="PpzM9WxOJU"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="It&#39;s an IT blog..."/>
  <meta name="keyword" content="Java,v-vincen,v-vincen,livemylife,IT  blog,Blog"/>
  <link rel="shortcut icon" href="/img/avatar/favicon.jpg"/>

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script>

  
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css"/>

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css"/>
    <link rel="stylesheet" href="/css/widget.css"/>
    <link rel="stylesheet" href="/css/rocket.css"/>
    <link rel="stylesheet" href="/css/signature.css"/>
    <link rel="stylesheet" href="/css/catalog.css"/>
    <link rel="stylesheet" href="/css/livemylife.css"/>

    
      <!-- wave start -->
      <link rel="stylesheet" href="/css/wave.css"/>
      <!-- wave end -->
    

    
      <!-- top start (article top hot config) -->
      <link rel="stylesheet" href="/css/top.css"/>
      <!-- top end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/scroll.css"/>
      <!-- ThemeColor end -->
    

    
      <!-- viewer start (Picture preview) -->
      <link rel="stylesheet" href="/css/viewer.min.css"/>
      <!-- viewer end -->
    

    
      <!-- Search start -->
      <link rel="stylesheet" href="/css/search.css"/>
      <!-- Search end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/themecolor.css"/>
      <!-- ThemeColor end -->
    

    

    
      <!-- gitalk start -->
      <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> -->
      <link rel="stylesheet" href="/css/gitalk.css"/>
      <!-- gitalk end -->
    
  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
  href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->

  <!-- ga & ba script hoook -->
  <link rel="canonical" href="https://v-vincen.life/en/Git-6-Git-不常用到的命令（看懂这个-git-你就懂了)/">
  <title>
    
      [Git] 6 Git 不常用到的命令（看懂这个 git 你就懂了) - JavaDev | 一如Java深似海
    
  </title>
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->

	<body ontouchstart="" class="body--light body--light">


		<!-- ThemeColor -->
		
		<!-- ThemeColor -->
<style type="text/css">
  .body--light {
    --light-mode: none;
    --dark-mode: block;
  }
  .body--dark {
    --light-mode: block;
    --dark-mode: none;
  }
  i.mdui-icon.material-icons.light-mode {
    display: var(--light-mode);
  }
  i.mdui-icon.material-icons.dark-mode {
    display: var(--dark-mode);
  }
</style>
<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons light-mode"></i>
  <i class="mdui-icon material-icons dark-mode"></i>
</div>
<script>
  //getCookieValue
  function getCookieValue(a) {
    var b = document.cookie.match('(^|[^;]+)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b
      ? b.pop()
      : '';
  }
  let themeMode = 'light';
  if (getCookieValue('sb-color-mode') && (getCookieValue('sb-color-mode') !== themeMode)) {
    let dbody = document.body.classList;
    themeMode === 'dark' ? dbody.remove('body--dark') : dbody.add('body--dark');
  }

  //setCookieValue
  var toggleBtn = document.querySelector(".toggle");
  toggleBtn.addEventListener("click", function () {
    var e = document.body.classList.contains("body--dark");
    var cookieString = e
      ? "dark"
      : "light";
    var exp = new Date();
    exp.setTime(exp.getTime() + 3 * 24 * 60 * 60 * 1000); //3天过期
    document.cookie = "sb-color-mode=" + cookieString + ";expires=" + exp.toGMTString() + ";path=/";
  });
</script>

		

		<!-- Gitter -->
		
		<!-- Gitter -->
<!-- Docs:https://gitter.im/?utm_source=left-menu-logo -->
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'hexo-theme-livemylife/blog'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

		

		<!-- 
		<a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>

		 -->

		<!-- Navigation (contains search)-->
		<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Live My Life</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux: <nav>'s height woule be hold on by its content. so, when navbar scale out, the <nav> will cover tags. also mask any touch event of tags, unfortunately. -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/">HOME</a>
          </li>

          
          
          
          
          <li>
            <a href="/about/">
              
              ABOUT
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/archive/">
              
              ARCHIVES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/categories/">
              
              CATEGORIES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/tags/">
              
              TAGS
              
              
            </a>
          </li>
          
          

          
          <li>
            <a class="popup-trigger">
              <span class="search-icon"></span>SEARCH</a>
          </li>
          

          <!-- LangSelect -->
          
          
          
          
          
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>

<script>
  // Drop Bootstarp low-performance Navbar Use customize navbar with high-quality material design animation in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function() {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>


		<!-- Post Header (contains intro-header、signature、wordcount、busuanzi、waveoverlay) -->
		<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <style type="text/css">
    .body--light {
      /* intro-header */
      --intro-header-background-image-url-home: url('/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: url('/img/git/git_bg.png');
      --intro-header-background-image-url-page: url('//img/git/git_bg.png');
    }
    .body--dark {
      --intro-header-background-image-url-home: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/git/git_bg.png');
      --intro-header-background-image-url-page: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('//img/git/git_bg.png');
    }

    header.intro-header {
       /*post*/
        background-image: var(--intro-header-background-image-url-post);
        /* background-image: url('/img/git/git_bg.png'); */
      
    }

    
      #signature {/*signature*/
        background-image: url('/img/signature/vincent-white.png');
      }
    
  </style>





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/tags/#Git" title="Git">Git</a>
              
            </div>
            <h1>[Git] 6 Git 不常用到的命令（看懂这个 git 你就懂了)</h1>
            <h2 class="subheading">看懂这个 git 你就懂了</h2>
            <span class="meta">
              Posted by Mr.Vincent on
              2020-02-27
            </span>


            
            <!-- WordCount start -->
            <div class="blank_box"></div>
            <span class="meta">
              Estimated Reading Time <span class="post-count">17</span> Minutes
            </span>
            <div class="blank_box"></div>
            <span class="meta">
              Words <span class="post-count">4k</span> In Total
            </span>
            <div class="blank_box"></div>
            <!-- WordCount end -->
            
            
            <!-- 不蒜子统计 start -->
            <span class="meta" id="busuanzi_container_page_pv">
              Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
            </span>
            <!-- 不蒜子统计 end -->
            


          </div>
          
        </div>
      </div>
    </div>
  </div>

  
  <!-- waveoverlay start -->
  <div class="preview-overlay">
    <svg class="preview-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
      <defs>
        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
      </defs>
      <g class="preview-parallax">
        <use xlink:href="#gentle-wave" x="48" y="0" fill=var(--gentle-wave1)></use>
        <use xlink:href="#gentle-wave" x="48" y="3" fill=var(--gentle-wave2)></use>
        <use xlink:href="#gentle-wave" x="48" y="5" fill=var(--gentle-wave3)></use>
        <use xlink:href="#gentle-wave" x="48" y="7" fill=var(--gentle-wave)></use>
      </g>
    </svg>
  </div>
  <!-- waveoverlay end -->
  

</header>



		<!-- Main Content (Post contains
	Pager、
	tip、
	socialshare、
	gitalk、gitment、disqus-comment、
	Catalog、
	Sidebar、
	Featured-Tags、
	Friends Blog、
	anchorjs、
	) -->
		<!-- Modify by Yu-Hsuan Yen -->
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1 post-container">

        <p>先来上张 git 命令总结图（记住它 git 命令不是事）：</p>
<p><img src="1.jpg" alt="1.jpg"></p>
<h2 id="回顾-git-分区和工作流">回顾 git 分区和工作流</h2>
<p>Git 的区域分为 <strong>工作区、暂存区、本地仓库区</strong>。</p>
<p><strong><code>工作区（work Tree）</code></strong>：当前的工作区域。</p>
<p><strong><code>暂存区（Stage or Index）</code></strong>：暂存区域，和 <code>git stash</code> 命令暂存的地方不一样。使用 <code>git add xx</code>，就可以将 xx 添加近 Stage 里面。</p>
<p><strong><code>本地仓库（Repository）</code></strong>：我们在为项目添加本地库之后，会在工作区生成一个隐藏目录 <code>.git</code>，此目录即为当前工作区的本地版本库。同时提交的历史，使用 <code>git commit</code> 提交后的结果也在这里。</p>
<p><img src="2.png" alt="2.png"></p>
<p><strong>以下简单敘述一下把文件存入 <code>Repository</code> 流程：</strong></p>
<p>刚开始 <code>working tree 、 index 与 repository（HEAD）</code>里面的內容都是一致的；</p>
<p><img src="3.png" alt="3.png"></p>
<p>当 git 管理的文件夹里面的内容出现改变后，此時 <code>working tree</code> 的內容就会跟 <code>index</code> 及 <code>repository（HEAD）</code> 的不一致，而 git 知道是哪些文件 <code>（Tracked File）</code>被改动过，直接将文件状态设置为 <code>modified （Unstaged files）</code>。</p>
<p><img src="4.png" alt="4.png"></p>
<p>当我们执行 <code>git add</code> 后，会将这些改变的文件內容加入 <code>index</code> 中 <code>（Staged files）</code>，所以此时 <code>working tree</code> 跟 <code>index</code> 的內容是一致的，但他们与 <code>repository（HEAD）</code> 內容不一致。</p>
<p><img src="5.png" alt="5.png"></p>
<p>接着执行 <code>git commit</code> 後，將 git 索引中所有改变的文件內容提交至 <code>repository</code> 中，建立出新的 <code>commit</code> 节点 <code>HEAD</code> 后， <code>working tree</code>、<code>index</code> 与 <code>repository（HEAD）</code> 区域的内容 又会保持一致。</p>
<p><img src="6.png" alt="6.png"></p>
<h2 id="git-reset-三种模式"><code>git reset</code> 三种模式</h2>
<h3 id="git-reset-hard-HEAD"><code>git reset --hard HEAD^</code></h3>
<p><strong><code>reset --hard</code></strong>：<strong>会在重置 HEAD 和 branch1 的同时，重置 stage 区 和工作目录里的内容。</strong> 当你在 <code>reset</code> 后面加了 <code>--hard</code> 参数时，你的 stage 区和工作目录里的内容会被完全重置为和 <code>HEAD</code> 的新位置相同的内容。换句话说，就是你的没有 <code>commit</code> 的修改会被全部擦掉。</p>
<p>例：在上次 <code>commit</code> 之后又对文件做了一些改动：修改后的 ganmes.txt 文件 <code>add</code> 到 stage 区，修改后的 shopping list.txt 保留在工作目录，执行 <code>git reset --hard HEAD</code> 后，<code>HEAD</code> 和当前 branch 切到最近的一次（当前） <code>commit</code> 的同时，你工作目录里的新改动和已经 <code>add</code> 到 stage 区的新改动也一起全都消失了。</p>
<p><img src="7.png" alt="7.png"></p>
<p><img src="8.png" alt="8.png"></p>
<p><strong>注</strong>：执行 <code>git reset --hard HEAD^</code>，回退到上一次的  <code>commit</code>。（可输入 <code>git log</code> 或者 <code>git log --oneline</code> 进行版本查询）</p>
<h3 id="git-reset-soft-HEAD"><code>git reset --soft HEAD^</code></h3>
<p><strong><code>reset --soft</code></strong>：<strong>会在重置 HEAD 和 branch 时，保留工作目录和暂存区中的内容，并把重置 HEAD 所带来的新的差异放进暂存区。</strong></p>
<p>例：修改后的 ganmes.txt 文件 <code>add</code> 到 stage 区，修改后的 shopping list.txt 保留在工作目录；</p>
<p><img src="7.png" alt="7.1.png"></p>
<p>假设此时当前 <code>commit</code> 的改动内容是新增了 laughters.txt 文件；</p>
<p><img src="9.png" alt="9.png"></p>
<p>执行 <code>git reset --soft HEAD^</code>，HEAD 和它所指向的 branch 被移动到 HEAD^ 的同时，原先 HEAD 处 <code>commit</code> 的改动（也就是那个 laughters.txt 文件）也会被放进暂存区。</p>
<p><img src="10.png" alt="10.png"></p>
<p><strong>注</strong>：<strong><code>--soft</code> 和 <code>--hard</code> 的区别</strong>：<code>--hard</code> 会<strong>清空</strong>工作目录和暂存区的改动,而 <code>--soft</code> 则会<strong>保留</strong>工作目录的内容，并把因为保留工作目录内容所带来的新的文件<strong>差异放进暂存区</strong>。</p>
<h3 id="git-reset-mixed-HEAD"><code>git reset --mixed HEAD^</code></h3>
<p><code>reset --mixed（可不加，--mixed 为默认参数）</code>：它的行为是：<strong>保留工作目录，并且清空暂存区。</strong> 也就是说，工作目录的修改、暂存区的内容以及由 reset 所导致的新的文件差异，都会被放进工作目录。简而言之，就是<strong>把所有差异都混合（mixed）放在工作目录中</strong>。</p>
<p>例：情况同上，修改了 games.txt 和 shopping list.txt，并把 games.txt 放进了暂存区；</p>
<p><img src="7.png" alt="7.2.png"></p>
<p>当前 <code>commit</code> 的改动内容是新增了 laughters.txt 文件；</p>
<p><img src="9.png" alt="9.png"></p>
<p>执行 <code>git reset HEAD^ 或者 git reset --mixed HEAD^</code>，工作目录的内容和 <code>--soft</code> 一样会被保留。区别在于，它会把暂存区清空，并把原节点和 reset 节点的差异的文件放在工作目录。总而言之就是，<strong>工作目录、暂存区、reset 的差异文件，都会被放进工作目录，同时当前 <code>commit</code>（最近的一次 <code>commit</code>）的内容被标记为 <code>Untracked files</code>。</strong></p>
<p><img src="11.png" alt="11.png"></p>
<h3 id="reset-三种模式区别和使用场景："><code>reset</code> 三种模式区别和使用场景：</h3>
<h4 id="区别">区别</h4>
<p><code>--hard</code>：重置位置的同时，将 working tree 工作区、 index 暂存区及 repository 都重置成目标 reset 节点的內容，所以效果看起来等同于<strong>清空暂存区和工作区</strong>。</p>
<p><code>--soft</code>：重置位置的同时，保留 working tree 工作区和 index 暂存区的内容，只让 repository 中的内容和 reset 目标节点保持一致。因此原节点和 reset 节点之间的<strong>差异变更集</strong>会放入 index 暂存区中（Staged files）。所以效果看起来就是<strong>工作区、暂存区内容不变，原节点和 reset 节点之间的差异放到暂存区中</strong>。</p>
<p><code>--mixed（默认）</code>：重置位置的同时，只保留 working tree 工作区的內容，但会将 index 暂存区 和 repository 中的內容更改和 reset 目标节点一致，因此原节点和 reset 节点之间的<strong>差异变更集</strong>会放入 working tree 工作区中。所以效果看起来就是<strong>index 暂存区清空，原节点和 reset 节点之间的所有差异都会放到工作目录中</strong>。</p>
<h4 id="使用场景">使用场景</h4>
<p><code>--hard</code>：</p>
<ul>
<li>放弃目前本地的所有更改，去掉所有暂存区和工作区的文件，执行 <code>git reset --hard HEAD</code> 。</li>
<li>抛弃目标节点后的所有 <code>commit</code>（觉得 <code>commit</code> 有问题）。</li>
</ul>
<p><code>--soft</code>：</p>
<ul>
<li>合并多个 <code>commit</code> 节点，让 <code>commit</code> 演进线图清晰。</li>
</ul>
<p><code>--mixed（默认）</code>：</p>
<ul>
<li>同样可以合并多个 <code>commit</code> 节点，让 <code>commit</code> 演进线图清晰。</li>
<li>移除所有 index 暂存区中的文件，执行 <code>git reset HEAD</code>，将这些文件变更为 <code>Untracked files</code>。（还原 <code>add</code> 错的文件）</li>
<li>回撤错误的 <code>commit</code> 文件。</li>
</ul>
<h2 id="git-其他命令">git 其他命令</h2>
<p><img src="12.png" alt="12.png"></p>
<h3 id="git-commit-a"><code>git commit -a</code></h3>
<p>等同于连续执行 <code>git add</code> 与 <code>git commit</code>，即先把文件从工作目录复制到暂存区，然后再从暂存区复制到仓库中。</p>
<h3 id="git-checkout-file"><code>git checkout -- &lt;file&gt;</code></h3>
<p>修改了工作区，没 <code>add</code> 到暂存区，执行 <code>git checkout -- &lt;file&gt;</code> 命令来撤销。简单的说就是暂存区覆盖工作区（<strong>把修改的内容还原，未暂存区回退到文件初始状态</strong>）。</p>
<p>例：现在 readme.txt 里面内容是 first day.，已经 <code>add</code> 到暂存区了，修改 readme.txt，内容改成 second day.，然后执行 <code>git checkout -- readme.txt</code> 命令,你会发现 readme.txt 的内容又变成 first day.。</p>
<p><img src="13.png" alt="13.png"></p>
<h3 id="git-checkout-HEAD-file"><code>git checkout HEAD &lt;file&gt;</code></h3>
<p><code>git checkout HEAD &lt;file&gt;</code> 命令是 <code>git checkout -- &lt;file&gt;</code> 和 <code>git reset HEAD</code> 的合成体，直接用 HEAD 覆盖工作区，暂存区。（<strong>暂存区回退到文件初始状态</strong>）</p>
<p>例：工作区、暂存区以及 HEAD 中文件内容都是 first day.，修改 readme.txt 内容为 second day.，<code>add .</code> 到暂存区，执行 <code>git checkout HEAD readme.txt</code> 命令，再查看 readme.txt 内容的时候你会发现变成了 first day.。</p>
<p><img src="14.png" alt="14.png"></p>
<h3 id="git-reset-hard-commit-id"><code>git reset --hard commit_id</code></h3>
<p>执行完 <code>git reset --hard HEAD^</code> 后悔了，想恢复回去，可执行 <code>git reset --hard commit_id</code>。（这里的 <code>commit_id</code> 是版本号，忘记了刚才最后一个的版本号，可以通过 <code>git reflog</code> 来查看）</p>
<h3 id="git-diff"><code>git diff</code></h3>
<p><img src="15.png" alt="15.png"></p>
<ul>
<li>
<p><code>git diff</code>：查看尚未暂存的文件更新了哪些部分，即当前状态下工作区和暂存区之间的差异。</p>
</li>
<li>
<p><code>git diff –cached</code>：查看已暂存文件和上次提交时的快照之间的差异，即当前状态下暂存区和分支内的差异。</p>
</li>
<li>
<p><code>git diff HEAD</code>：查看未暂存文件与最新提交文件快照的区别，即当前状态下工作区和分支内的差异。</p>
</li>
</ul>
<h3 id="git-stash"><code>git stash</code></h3>
<ul>
<li>
<p><code>git stash save &quot;save message&quot;</code>: 执行存储时，添加备注方便查找，只用 <code>git stash</code> 也要可以的，但查找时不方便识别。</p>
</li>
<li>
<p><code>git stash list</code>：查看 <code>stash</code> 了哪些存储。</p>
</li>
<li>
<p><code>git stash pop</code>：恢复之前缓存的 <code>stash</code> 到工作区并删除。</p>
</li>
<li>
<p><code>git stash clear</code>：删除所有缓存的 <code>stash</code>。</p>
</li>
</ul>
<p>例：当你的开发进行到一半，代码还不想进行提交，然后需要拉去远程代码，直接 <code>git pull</code> 会拒绝覆盖当前的修改，产生冲突。这个时候我们可以这样解决：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git stash       <span class="regexp">//</span>先保存修改的代码（注：只有被 add 的才能被保存）</span><br><span class="line">git pull        <span class="regexp">//</span>再拉取</span><br><span class="line">git stash pop   <span class="regexp">//</span>恢复保存的代码</span><br></pre></td></tr></table></figure>
<p>例：工作流被打断，需要先做紧急需求（emergency fix）。这时候：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git stash        <span class="regexp">//</span>保存开发到一半的代码</span><br><span class="line">edit emergency fix</span><br><span class="line">git commit -a -m <span class="string">&quot;Fix in a hurry&quot;</span></span><br><span class="line">git stash pop   <span class="regexp">//</span>将代码追加到最新的提交之后</span><br></pre></td></tr></table></figure>
<p>例：提交特定文件，如果对多个文件做了修改，但只想提交几个文件（或者想先暂时保存几个修改），测试其他文件的执行结果。可以通过 <code>git stash save --keep-index</code> 来进行：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git add --first part            <span class="regexp">//</span>只将第一部分加入管理 the index</span><br><span class="line">git stash save --keep-index     <span class="regexp">//</span>将其余部分保存起来</span><br><span class="line">edit<span class="regexp">/build/</span>test first part</span><br><span class="line">git commit -m <span class="string">&#x27;First part&#x27;</span>      <span class="regexp">//</span>提交全部的 git 管理中的代码</span><br><span class="line">git stash pop                   <span class="regexp">//</span>继续进行存储代码的工作</span><br></pre></td></tr></table></figure>
<h3 id="git-rm-r-cached"><code>git rm -r --cached .</code></h3>
<p>在使用 git 的时候我们有时候需要忽略一些文件或者文件夹。我们一般在仓库的根目录创建 <code>.gitignore</code> 文件；在提交之前，修改 <code>.gitignore</code> 文件，添加需要忽略的文件。然后再做 <code>add  commit push</code> 等。但是有时在使用过称中，需要对 <code>.gitignore</code> 文件进行再次的修改。这时我们需要清除一下缓存 <code>cache</code>，才能是 <code>.gitignore</code> 生效。<br>
操作如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git rm -r --cached .                #清除缓存</span><br><span class="line">git add .                           #重新 trace file</span><br><span class="line">git commit -m &quot;update .gitignore&quot;   #提交和注释</span><br><span class="line">git push origin master              #可选，如果需要同步到 remote 上的话</span><br></pre></td></tr></table></figure>
<h3 id="git-log-file"><code>git log -- &lt;file&gt;</code></h3>
<p><code>git log</code> 可以让我们查看提交 <code>commit history</code>，默认会输出 <code>commit hash</code>，<code>author</code>，<code>date</code>，<code>commit message</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ git log</span><br><span class="line">commit 0005d1e3f54b79fe4707fbccc44b89e0fb4ce565 (HEAD -&gt; master, origin&#x2F;master, origin&#x2F;HEAD)</span><br><span class="line">Author: Carl Mungazi &lt;c_mungazi@hotmail.co.uk&gt;</span><br><span class="line">Date:   Sat Jan 12 05:46:05 2019 +0000</span><br><span class="line"></span><br><span class="line">    Fix typo (#14576)</span><br><span class="line"></span><br><span class="line">commit f290138d329aa7aa635d88868705b23372e9f004</span><br><span class="line">Author: Brian Vaughn &lt;brian.david.vaughn@gmail.com&gt;</span><br><span class="line">Date:   Thu Jan 10 12:56:52 2019 -0800</span><br><span class="line"></span><br><span class="line">    react-debug-tools accepts currentDispatcher ref as param (#14556)</span><br><span class="line"></span><br><span class="line">    * react-debug-tools accepts currentDispatcher ref as param</span><br><span class="line"></span><br><span class="line">    * ReactDebugHooks injected dispatcher ref is optional</span><br></pre></td></tr></table></figure>
<p>简单总结 <code>git log</code> 的几个参数。</p>
<h4 id="oneline"><code>--oneline</code></h4>
<p>这个命令简化 <code>git log</code> 的默认的输出，仅仅输出 <code>commit hash</code> 前7个字符串和 <code>commit message</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git log --oneline</span><br><span class="line">0005d1e3f (HEAD -&gt; master, origin&#x2F;master, origin&#x2F;HEAD) Fix typo (#14576)</span><br><span class="line">f290138d3 react-debug-tools accepts currentDispatcher ref as param (#14556)</span><br><span class="line">b4ad8e947 rename useImperativeMethods -&gt; useImperativeHandle (#14565)</span><br><span class="line">ab03e3d65 Inject ReactCurrentDispatcher ref to DevTools (#14550)</span><br><span class="line">19ef0ec11 Separate current owner and dispatcher (#14548)</span><br></pre></td></tr></table></figure>
<h4 id="p-file"><code>-p &lt;file&gt;</code></h4>
<p><code>-p</code> 控制输出每个 <code>commit</code> 具体修改的内容，输出的形式以 <code>diff</code> 的形式给出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">$ git log -p</span><br><span class="line">commit 0005d1e3f54b79fe4707fbccc44b89e0fb4ce565 (HEAD -&gt; master, origin&#x2F;master, origin&#x2F;HEAD)</span><br><span class="line">Author: Carl Mungazi &lt;c_mungazi@hotmail.co.uk&gt;</span><br><span class="line">Date:   Sat Jan 12 05:46:05 2019 +0000</span><br><span class="line"></span><br><span class="line">    Fix typo (#14576)</span><br><span class="line"></span><br><span class="line">diff --git a&#x2F;packages&#x2F;scheduler&#x2F;src&#x2F;Scheduler.js b&#x2F;packages&#x2F;scheduler&#x2F;src&#x2F;Scheduler.js</span><br><span class="line">index 480ec81c4..a6e27850d 100644</span><br><span class="line">--- a&#x2F;packages&#x2F;scheduler&#x2F;src&#x2F;Scheduler.js</span><br><span class="line">+++ b&#x2F;packages&#x2F;scheduler&#x2F;src&#x2F;Scheduler.js</span><br><span class="line">@@ -194,7 +194,7 @@ function flushWork(didTimeout) &#123;</span><br><span class="line">         firstCallbackNode !&#x3D;&#x3D; null &amp;&amp;</span><br><span class="line">         !(enableSchedulerDebugging &amp;&amp; isSchedulerPaused)</span><br><span class="line">       ) &#123;</span><br><span class="line">-        &#x2F;&#x2F; TODO Wrap i nfeature flag</span><br><span class="line">+        &#x2F;&#x2F; TODO Wrap in feature flag</span><br><span class="line">         &#x2F;&#x2F; Read the current time. Flush all the callbacks that expire at or</span><br><span class="line">         &#x2F;&#x2F; earlier than that time. Then read the current time again and repeat.</span><br><span class="line">         &#x2F;&#x2F; This optimizes for as few performance.now calls as possible.</span><br><span class="line"></span><br><span class="line">commit f290138d329aa7aa635d88868705b23372e9f004</span><br><span class="line">Author: Brian Vaughn &lt;brian.david.vaughn@gmail.com&gt;</span><br><span class="line">Date:   Thu Jan 10 12:56:52 2019 -0800</span><br><span class="line"></span><br><span class="line">    react-debug-tools accepts currentDispatcher ref as param (#14556)</span><br><span class="line"></span><br><span class="line">    * react-debug-tools accepts currentDispatcher ref as param</span><br><span class="line"></span><br><span class="line">    * ReactDebugHooks injected dispatcher ref is optional</span><br><span class="line"></span><br><span class="line">diff --git a&#x2F;packages&#x2F;react-debug-tools&#x2F;src&#x2F;ReactDebugHooks.js b&#x2F;packages&#x2F;react-debug-tools&#x2F;src&#x2F;ReactDebugHooks.js</span><br><span class="line">index 9b5a3b499..b00df7e46 100644</span><br><span class="line">--- a&#x2F;packages&#x2F;react-debug-tools&#x2F;src&#x2F;ReactDebugHooks.js</span><br><span class="line">+++ b&#x2F;packages&#x2F;react-debug-tools&#x2F;src&#x2F;ReactDebugHooks.js</span><br><span class="line">@@ -20,7 +20,7 @@ import &#123;</span><br><span class="line">   ForwardRef,</span><br><span class="line"> &#125; from &#39;shared&#x2F;ReactWorkTags&#39;;</span><br><span class="line"></span><br><span class="line">-const ReactCurrentDispatcher &#x3D; ReactSharedInternals.ReactCurrentDispatcher;</span><br><span class="line">+type CurrentDispatcherRef &#x3D; typeof ReactSharedInternals.ReactCurrentDispatcher;</span><br></pre></td></tr></table></figure>
<h4 id="git-show"><code>git show</code></h4>
<p><code>git show</code> 命令同 <code>git log -p</code> 输出类似，只不过它只显示一个 <code>commit</code> 的内容，如果不指定 <code>commit hash</code>，它默认输出 <code>HEAD</code> 指向 <code>commit</code> 的内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ git show</span><br><span class="line">commit 0005d1e3f54b79fe4707fbccc44b89e0fb4ce565 (HEAD -&gt; master, origin&#x2F;master, origin&#x2F;HEAD)</span><br><span class="line">Author: Carl Mungazi &lt;c_mungazi@hotmail.co.uk&gt;</span><br><span class="line">Date:   Sat Jan 12 05:46:05 2019 +0000</span><br><span class="line"></span><br><span class="line">    Fix typo (#14576)</span><br><span class="line"></span><br><span class="line">diff --git a&#x2F;packages&#x2F;scheduler&#x2F;src&#x2F;Scheduler.js b&#x2F;packages&#x2F;scheduler&#x2F;src&#x2F;Scheduler.js</span><br><span class="line">index 480ec81c4..a6e27850d 100644</span><br><span class="line">--- a&#x2F;packages&#x2F;scheduler&#x2F;src&#x2F;Scheduler.js</span><br><span class="line">+++ b&#x2F;packages&#x2F;scheduler&#x2F;src&#x2F;Scheduler.js</span><br><span class="line">@@ -194,7 +194,7 @@ function flushWork(didTimeout) &#123;</span><br><span class="line">         firstCallbackNode !&#x3D;&#x3D; null &amp;&amp;</span><br><span class="line">         !(enableSchedulerDebugging &amp;&amp; isSchedulerPaused)</span><br><span class="line">       ) &#123;</span><br><span class="line">-        &#x2F;&#x2F; TODO Wrap i nfeature flag</span><br><span class="line">+        &#x2F;&#x2F; TODO Wrap in feature flag</span><br><span class="line">         &#x2F;&#x2F; Read the current time. Flush all the callbacks that expire at or</span><br><span class="line">         &#x2F;&#x2F; earlier than that time. Then read the current time again and repeat.</span><br><span class="line">         &#x2F;&#x2F; This optimizes for as few performance.now calls as possible.</span><br></pre></td></tr></table></figure>
<h4 id="git-shortlog"><code>git shortlog</code></h4>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">12645@DESKTOP-DBGLR67 MINGW64 &#x2F;h&#x2F;tmp&#x2F;git&#x2F;react (master)</span><br><span class="line">$ git shortlog</span><br><span class="line">243083df (1):</span><br><span class="line">      Remove unnecessary comparison; (#11215)</span><br><span class="line"></span><br><span class="line">839 (1):</span><br><span class="line">      Update Japanese translation to 75fafe1</span><br><span class="line"></span><br><span class="line">AGCB (1):</span><br><span class="line">      fix spelling error: differen -&gt; different (#14378)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>git shortlog -s</code>：可以用来统计每个作者的 <code>commit</code> 数量</li>
<li><code>git shortlog -n</code>：可以用来对统计的量进行倒序排列</li>
</ul>
<h2 id="gitk"><code>gitk</code></h2>
<p><code>gitk</code> 是 <code>git</code> 提供的一个 gui 工具，可以很清晰地查看搜索提交历史及 git 相关操作。在终端 git 仓库目录下输入 <code>gitk</code> 命令即可使用。</p>
<p><img src="16.png" alt="16"></p>
<p>通过右键我们可以执行一些简单的操作，包括基于当前提交创建 <code>tag</code>，创建分支，<code>reset</code> 到当前提交、<code>revert</code> 当前提交等。</p>
<p><img src="17.gif" alt="17"></p>
<p><img src="18.gif" alt="18"></p>
<p>如果你安装了 <code>git</code> 工具，但无法使用 <code>gitk</code> 命令，更新 <code>git</code> 版本即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew update</span><br><span class="line">brew install git</span><br></pre></td></tr></table></figure>
<h3 id="gitk-follow-filename"><code>gitk --follow &lt;filename&gt;</code></h3>
<p>当然我一般的用法是，当合并代码时，某些文件发生了冲突，查询该文件的提交信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitk --follow [filename]</span><br></pre></td></tr></table></figure>
<p>可以清楚的显示其相关所有信息。</p>
<h2 id="git-error-Or-fatal"><code>git error Or fatal</code></h2>
<h3 id="git-branch-set-upstream-to-origin-remote-branch-your-branch"><code>git branch --set-upstream-to=origin/remote_branch  your_branch</code></h3>
<p>新建本地者分支后，拉取远程仓库，使用 <code>git pull</code> 的时候会报这样的错：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">There <span class="keyword">is</span> <span class="keyword">no</span> tracking information <span class="keyword">for</span> the current branch.</span><br><span class="line">Please specify which branch you want <span class="keyword">to</span> merge with.</span><br><span class="line">See git-pull(<span class="number">1</span>) <span class="keyword">for</span> details.</span><br><span class="line"></span><br><span class="line">    git pull <span class="symbol">&lt;remote&gt;</span> <span class="symbol">&lt;branch&gt;</span></span><br><span class="line"></span><br><span class="line">If you wish <span class="keyword">to</span> <span class="keyword">set</span> tracking information <span class="keyword">for</span> this branch you can <span class="keyword">do</span> <span class="keyword">so</span> with:</span><br><span class="line"></span><br><span class="line">    git branch --<span class="keyword">set</span>-upstream-<span class="keyword">to</span>=<span class="symbol">&lt;remote&gt;</span>/<span class="symbol">&lt;branch&gt;</span> master</span><br></pre></td></tr></table></figure>
<p>这是因为，我们新建的本地分支，并没有相关的跟踪信息，解决方法根据报错信息给的提示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch --set-upstream-to&#x3D;origin&#x2F;remote_branch  your_branch</span><br></pre></td></tr></table></figure>
<p>其中，<code>origin/remote_branch</code> 是你本地分支对应的远程分支；<code>your_branch</code> 是你当前的本地分支。</p>
<h3 id="git-remote-add-origin-url"><code>git remote add origin &lt;url&gt;</code></h3>
<p>新建本地仓库后，推送本地仓库到远程仓库，使用 <code>git push</code> 的时候会报这样的错：</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fatal: <span class="keyword">No</span> configured push destination.</span><br><span class="line">Either specify the URL <span class="keyword">from</span> the command-<span class="type">line</span> <span class="keyword">or</span> configure a remote repository <span class="keyword">using</span></span><br><span class="line"></span><br><span class="line">    git remote <span class="keyword">add</span> &lt;<span class="type">name</span>&gt; &lt;url&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">and</span> <span class="keyword">then</span> push <span class="keyword">using</span> the remote <span class="type">name</span></span><br><span class="line"></span><br><span class="line">    git push &lt;<span class="type">name</span>&gt;</span><br></pre></td></tr></table></figure>
<p>同样的本地仓库并没有关联到远程仓库，解决方法根据报错信息给的提示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin &lt;url&gt;</span><br></pre></td></tr></table></figure>
<p>其中 <code>url</code> 就是你远程仓库的地址，可以是 https：<code>git remote add origin https://github.com/V-Vincen/jsDeliver.git</code>，<br>
也可以是 ssh：<code>git@github.com:V-Vincen/jsDeliver.git</code>。</p>
<h3 id="allow-unrelated-histories、rebase-origin-master"><code>allow-unrelated-histories</code>、<code>rebase origin master</code></h3>
<p>创建本地仓库，拉取远程仓库或推送本地仓库到远程仓库，<code>git pull</code> 或者 <code>git push</code> 的时候回报这样的错：</p>
<figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">error: </span>src refspec master does not match any</span><br><span class="line"><span class="keyword">error: </span>failed to push some refs to &#x27;https://github.com/V-Vincen/jsDeliver.git&#x27;</span><br></pre></td></tr></table></figure>
<p>这时候的本地仓库和远程仓库已经有关联的，但是本地仓库和远程仓库的代码不一致或者说两库之间的映射不匹配，解决方法有两种：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin master --allow-unrelated-histories</span><br></pre></td></tr></table></figure>
<p><code>allow-unrelated-histories</code>：可以理解为，允许本地和远程之间没有相关联的历史记录。</p>
<p>或者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull --rebase origin master</span><br></pre></td></tr></table></figure>
<p><code>rebase origin master</code>：重新设定远程 master。</p>
<h3 id="git-merge-master-allow-unrelated-histories"><code>git merge master --allow-unrelated-histories</code></h3>
<p>两个分支合并的时候，出现了下面的这个错误：</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fatal: refusing <span class="built_in">to</span> <span class="built_in">merge</span> unrelated histories</span><br></pre></td></tr></table></figure>
<p>同上类似，因为两个分支没有取得关系，解决方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge master --allow-unrelated-histories</span><br></pre></td></tr></table></figure>
<p>参考：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c2ec5f06cf1a">https://www.jianshu.com/p/c2ec5f06cf1a</a></p>
<p>参考：<a target="_blank" rel="noopener" href="http://www.360doc.com/content/17/0215/15/17572791_629200351.shtml">http://www.360doc.com/content/17/0215/15/17572791_629200351.shtml</a></p>
<p>参考：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/14afc9916dcb">https://www.jianshu.com/p/14afc9916dcb</a></p>


        <hr>
        <!-- Pager -->
        <ul class="pager">
          
          <li class="previous">
            <a href="/en/Mac-Mac-ifconfig-的各个端口/" data-toggle="tooltip" data-placement="top" title="[Mac] Mac ifconfig 的各个端口">&larr; Previous Post</a>
          </li>
          
          
          <li class="next">
            <a href="/en/Mac-9-Mac-安装配置-Zookeeper/" data-toggle="tooltip" data-placement="top" title="[Mac] 9 Mac 安装配置 Zookeeper">Next Post &rarr;</a>
          </li>
          
        </ul>

        
        <!-- tip start -->
        <!-- tip -->
<!-- tip start -->
<div class="tip">
  <p>
    
      If you like this blog or find it useful for you, you are welcome to comment on it. You are also welcome to share this blog, so that more people can participate in it. If the images used in the blog infringe your copyright, please contact the author to delete them. Thank you !
    
  </p>
</div>
<!-- tip end -->

        <!-- tip end -->
        

        
        <!-- Sharing Srtart -->
        <!-- Social Social Share Post -->
<!-- Docs:https://github.com/overtrue/share.js -->

<div class="social-share" data-initialized="true" data-disabled="tencent ,douban ,qzone ,linkedin ,facebook ,google ,diandian" data-wechat-qrcode-helper="" align="center">
  <ul class="list-inline text-center social-share-ul">
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-twitter">
        <i class="fa fa-twitter fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a class="social-share-icon icon-wechat">
        <i class="fa fa-weixin fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-weibo">
        <i class="fa fa-weibo fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-qq">
        <i class="fa fa-qq fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon" href="mailto:?subject=[Git] 6 Git 不常用到的命令（看懂这个 git 你就懂了)&body=Hi,I found this website and thought you might like it https://v-vincen.life/en/Git-6-Git-不常用到的命令（看懂这个-git-你就懂了)/">
        <i class="fa fa-envelope fa-1x" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
</div>

<!-- css & js -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"> -->
<script defer="defer" async="true" src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

        <!-- Sharing End -->
        
        <hr>

        <!-- comments start -->
        <!-- 1. gitalk comment -->

  <!-- gitalk start -->
  <!-- Docs:https://github.com/gitalk/gitalk/blob/master/readme-cn.md -->

  <div id="gitalk-container"></div>

  
    <!-- <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.js"></script> -->
    <script src="/js/comment/gitalk.js"></script>
  

  <script>
    var gitalk = new Gitalk({
      clientID: 'c5c071e55f689f41560d',
      clientSecret: '1e8aabf73ccb26e519ee937ea1ddd241c5d13b79',
      repo: 'blog-comment',
      owner: 'V-Vincen',
      admin: 'V-Vincen',
      id: 'Thu Feb 27 2020 10:33:36 GMT+0800', // Ensure uniqueness and length less than 50
      distractionFreeMode: false, // Facebook-like distraction free mode
      perPage: 10,
      pagerDirection: 'last',
      createIssueManually: false,
      language: 'en',
      proxy: 'https://www.v-vincen.icu/login/oauth/access_token'
    });
    gitalk.render('gitalk-container');

    var gtFolded = () => {
      setTimeout(function () {
        let markdownBody = document.getElementsByClassName("markdown-body");
        let list = Array.from(markdownBody);
        list.forEach(item => {
          if (item.clientHeight > 250) {
            item.classList.add('gt-comment-body-folded');
            item.style.maxHeight = '250px';
            item.title = 'Click to Expand';
            item.onclick = function () {
              item.classList.remove('gt-comment-body-folded');
              item.style.maxHeight = '';
              item.title = '';
              item.onclick = null;
            };
          }
        })
      }, 800);
    }
  </script>

  <!-- gitalk end -->


<!-- 2. gitment comment -->


<!-- 3. disqus comment -->


        <!-- comments end -->
        <hr>

      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%9B%9E%E9%A1%BE-git-%E5%88%86%E5%8C%BA%E5%92%8C%E5%B7%A5%E4%BD%9C%E6%B5%81"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">回顾 git 分区和工作流</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#git-reset-%E4%B8%89%E7%A7%8D%E6%A8%A1%E5%BC%8F"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">git reset 三种模式</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#git-reset-hard-HEAD"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">git reset --hard HEAD^</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#git-reset-soft-HEAD"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">git reset --soft HEAD^</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#git-reset-mixed-HEAD"><span class="toc-nav-number">2.3.</span> <span class="toc-nav-text">git reset --mixed HEAD^</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#reset-%E4%B8%89%E7%A7%8D%E6%A8%A1%E5%BC%8F%E5%8C%BA%E5%88%AB%E5%92%8C%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9A"><span class="toc-nav-number">2.4.</span> <span class="toc-nav-text">reset 三种模式区别和使用场景：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%8C%BA%E5%88%AB"><span class="toc-nav-number">2.4.1.</span> <span class="toc-nav-text">区别</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-nav-number">2.4.2.</span> <span class="toc-nav-text">使用场景</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#git-%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">git 其他命令</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#git-commit-a"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">git commit -a</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#git-checkout-file"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">git checkout -- &lt;file&gt;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#git-checkout-HEAD-file"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">git checkout HEAD &lt;file&gt;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#git-reset-hard-commit-id"><span class="toc-nav-number">3.4.</span> <span class="toc-nav-text">git reset --hard commit_id</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#git-diff"><span class="toc-nav-number">3.5.</span> <span class="toc-nav-text">git diff</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#git-stash"><span class="toc-nav-number">3.6.</span> <span class="toc-nav-text">git stash</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#git-rm-r-cached"><span class="toc-nav-number">3.7.</span> <span class="toc-nav-text">git rm -r --cached .</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#git-log-file"><span class="toc-nav-number">3.8.</span> <span class="toc-nav-text">git log -- &lt;file&gt;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#oneline"><span class="toc-nav-number">3.8.1.</span> <span class="toc-nav-text">--oneline</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#p-file"><span class="toc-nav-number">3.8.2.</span> <span class="toc-nav-text">-p &lt;file&gt;</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#git-show"><span class="toc-nav-number">3.8.3.</span> <span class="toc-nav-text">git show</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#git-shortlog"><span class="toc-nav-number">3.8.4.</span> <span class="toc-nav-text">git shortlog</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#gitk"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">gitk</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#gitk-follow-filename"><span class="toc-nav-number">4.1.</span> <span class="toc-nav-text">gitk --follow &lt;filename&gt;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#git-error-Or-fatal"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">git error Or fatal</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#git-branch-set-upstream-to-origin-remote-branch-your-branch"><span class="toc-nav-number">5.1.</span> <span class="toc-nav-text">git branch --set-upstream-to&#x3D;origin&#x2F;remote_branch  your_branch</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#git-remote-add-origin-url"><span class="toc-nav-number">5.2.</span> <span class="toc-nav-text">git remote add origin &lt;url&gt;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#allow-unrelated-histories%E3%80%81rebase-origin-master"><span class="toc-nav-number">5.3.</span> <span class="toc-nav-text">allow-unrelated-histories、rebase origin master</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#git-merge-master-allow-unrelated-histories"><span class="toc-nav-number">5.4.</span> <span class="toc-nav-text">git merge master --allow-unrelated-histories</span></a></li></ol></li></ol>
        
        </div>
      </aside>
    



      <!-- Sidebar Container -->
      <div class="
                col-lg-8 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5>
            <a href="/tags/">FEATURED TAGS</a>
          </h5>
          <div class="tags">
            
            <a class="tag" href="/tags/#Git" title="Git">Git</a>
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
        <hr>
        <h5>FRIENDS</h5>
        <ul class="list-inline">

          
          <li>
            <a href="http://teacherye.com/" target="_blank">Teacher Ye</a>
          </li>
          
          <li>
            <a href="https://goldenaarcher.github.io/" target="_blank">GoldenaArcher</a>
          </li>
          
          <li>
            <a href="https://www.cnblogs.com/guoyinghome/" target="_blank">鸢羽_颖</a>
          </li>
          
          <li>
            <a href="https://cungudafa.top" target="_blank">cungudafa</a>
          </li>
          
          <li>
            <a href="https://www.hm1006.cn" target="_blank">hmblog</a>
          </li>
          
          <li>
            <a href="https://yremp.live" target="_blank">Yremp</a>
          </li>
          
          <li>
            <a href="https://vuial.cn" target="_blank">Vuial</a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</article>



<!-- anchorjs start -->
<!-- async load function -->
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script type="text/javascript">
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function(e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  };
</script>
<script type="text/javascript">
  //anchor-js, Doc:http://bryanbraun.github.io/anchorjs/
  async ("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function() {
    anchors.options = {
      visible: 'hover',
      placement: 'left',
      // icon: 'ℬ'
      icon: '❡'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  });
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

<!-- anchorjs end -->



		<!-- Footer (contains ThemeColor、viewer) -->
		<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          

          
            <li>
              <a target="_blank" href="https://github.com/V-Vincen">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          
            <li>
              <a target="_blank" href="https://twitter.com/V_Vincen_">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          
            <li>
              <a target="_blank" href="https://www.instagram.com/v_vincen_">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          

          

          

          
            <li>
              <a target="_blank" href="http://weibo.com/WVincen">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

        </ul>
        <p class="copyright text-muted">
          Copyright &copy;
          Mr.Vincent
          2021
          <br>
          Theme by
          <a target="_blank" rel="noopener" href="http://beantech.org">BeanTech</a>
          <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
          </span>
          re-Ported by
          <a href="https://v-vincen.life/">Live My Life</a>
          |
          <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=V-Vincen&repo=V-Vincen.github.io&type=star&count=true"></iframe>
        </p>
      </div>
    </div>
  </div>
</footer>

<a id="rocket" href="#top" class=""></a>


  <!-- jQuery -->
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <!-- Custom Theme JavaScript -->
  <script type="text/javascript" src="/js/hux-blog.min.js"></script>
  <!-- catalog -->
  <script async="true" type="text/javascript" src="/js/catalog.js"></script>
  <!-- totop(rocket) -->
  <script async="true" type="text/javascript" src="/js/totop.js"></script>

  
    <!-- Busuanzi JavaScript -->
    <script async="async" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <!-- Scroll start -->
    <script async="async" type="text/javascript" src="/js/scroll.js"></script>
    <!-- Scroll end -->
  

  
    <!-- LangSelect start -->
    <script type="text/javascript" src="/js/langselect.js"></script>
    <!-- LangSelect end -->
  

  
    <!-- Mouseclick -->
    <script type="text/javascript" src="/js/mouseclick.js" content='The first step is as good as half over...,Laugh and grow fat...,Man proposes God disposes...,When all else is lost the future still remains...,Wasting time is robbing oneself...,Sharp tools make good work...,Cease to struggle and you cease to live...,A friend in need is a friend indeed...,Faith can move mountains...' color='#9933CC,#339933,#66CCCC,#FF99CC,#CCCCFF,#6666CC,#663399,#66CC99,#FF0033'></script>
  

  
    <!-- ribbon -->
    <script type="text/javascript" src="/js/ribbonDynamic.js"></script>
  

  






  <!-- viewer start -->
  <!-- viewer start (Picture preview) -->
  
    <script async="async" type="text/javascript" src="/js/viewer/viewer.min.js"></script>
    <script async="async" type="text/javascript" src="/js/viewer/pic-viewer.js"></script>
  

  <!-- viewer end -->


<script>
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }

  // fastClick.js
  async ("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
    var $nav = document.querySelector("nav");
    if ($nav)
      FastClick.attach($nav);
    }
  )
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async ("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () { hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if ($('#tag_cloud').length !== 0) { async ("https://v-vincen.life/js/jquery.tagcloud.js", function () { $.fn.tagcloud.defaults = { // size: { start: 1, end: 1, unit: 'em' }, color: {
start: '#bbbbee', end: '#0085a1' } }; $('#tag_cloud a').tagcloud(); }) } </script> -->


		<!-- Search -->
		
		<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="row">
      <!-- <div class="col-md-9 col-md-offset-1"> -->
      <div class="col-lg-9 col-lg-offset-1 col-md-10 col-md-offset-1 local-search-content">

        <div class="local-search-header clearfix">

          <div class="local-search-input-wrapper">
            <span class="search-icon">
              <i class="fa fa-search fa-lg" style="margin: 25px 10px 25px 20px;"></i>
            </span>
            <input autocomplete="off" placeholder="SEARCH..." type="text" id="local-search-input">
          </div>
        </div>
        <div id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>


  
    <script src="/js/ziploader.js"></script>
  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;
    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // get search zip version
    $.get('/searchVersion.json?t=' + (+new Date()), function (res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson() {
      initLoad(['/search.flv'], {
        loadOptions: {
          success: function (obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function (e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions: {
          'json': 'application/json'
        }
      })
    }
    // search function;
    var searchFunc = function (search_id, content_id) {
      'use strict';
      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      // console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function () {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function (data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title
              ? data.title.trim()
              : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content
              ? data.content.trim().replace(/<[^>]+>/g, "")
              : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);

            var date = data.date;
            var dateTime = date.replace(/T/, " ").replace(/.000Z/, "");
            var imgUrl = data.header_img;
            


            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function (keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0,
                  position = [],
                  index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }
              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }
            // show search results
            if (isMatch) {
              // sort index by position of keyword
              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });
              // merge hits into slices
              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;
                  // move to next position of hit
                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {hits: hits, start: start, end: end, searchTextCount: searchTextCountInSlice};
              }
              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }
              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if (start < 0) {
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if (end > content.length) {
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }
              // sort slices in content by search text's count and hits' count
              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });
              // select top N slices in content
              var upperBound = parseInt('1');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }
              // highlight title and content
              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }
              var resultItem = '';

              // if (slicesOfTitle.length != 0) {   resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>"; } else {   resultItem += "<li><a target='_blank' href='" +
              // articleUrl + "' class='search-result-title'>" + title + "</a>"; } slicesOfContent.forEach(function (slice) {   resultItem += "<a target='_blank' href='" + articleUrl + "'><p class=\"search-result\">" + highlightKeyword(content, slice) +
              // "...</p></a>"; }); resultItem += "</li>";

              if (slicesOfTitle.length != 0) {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</div><time class='search-result-date'>" + dateTime + "</time>";
              } else {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + title + "</div><time class='search-result-date'>" + dateTime + "</time>";
              }
              slicesOfContent.forEach(function (slice) {
                resultItem += "<p class=\"search-result-content\">" + highlightKeyword(content, slice) + "...</p>";
              });
              resultItem += "</div><div class='search-result-right'><img class='media-image' src='" + imgUrl + "' width='64px' height='48px'></img></div></a>";

              resultItems.push({item: resultItem, searchTextCount: searchTextCount, hitCount: hitCount, id: resultItems.length});
            }
          })
        };

        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<div class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</div>";
          resultContent.innerHTML = searchResultList;
        }
      }
      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }
      // remove loading animation
      $('body').css('overflow', '');
      proceedsearch();
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 && $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    document.addEventListener('mouseup', (e) => {
      var _con = document.querySelector(".local-search-content");
      if (_con) {
        if (!_con.contains(e.target)) {
          onPopupClose();
        }
      }
    });
  </script>


		
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</body>
</html>
