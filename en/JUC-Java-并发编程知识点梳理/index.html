<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analytics、Baidu-Tongji)-->
<head>
  <!-- Google Analytics -->
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-164526897-1"></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'UA-164526897-1');
    </script>
  

  <!-- Baidu Tongji -->
  
    <script type="text/javascript">
      // Originial
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?49e5faf2bfd6c26c1eb20bad10ef10c7";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  <!-- Baidu Push -->
  
    <script>
      (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
  

  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <meta name="google-site-verification" content="lxDfCplOZbIzjhG34NuQBgu2gdyRlAtMB4utP5AgEBc"/>
  <meta name="baidu-site-verification" content="PpzM9WxOJU"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="It&#39;s an IT blog..."/>
  <meta name="keyword" content="Java,v-vincen,v-vincen,livemylife,IT  blog,Blog"/>
  <link rel="shortcut icon" href="/img/avatar/favicon.jpg"/>

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script>

  
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/bootstrap.min.css"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/beantech.min.css"/>

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/highlight.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/widget.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/rocket.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/signature.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/catalog.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/livemylife.css"/>

    
      <!-- wave start -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/wave.css"/>
      <!-- wave end -->
    

    
      <!-- top start (article top hot config) -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/top.css"/>
      <!-- top end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/scroll.css"/>
      <!-- ThemeColor end -->
    

    
      <!-- viewer start (Picture preview) -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/viewer.min.css"/>
      <!-- viewer end -->
    

    
      <!-- Search start -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/search.css"/>
      <!-- Search end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/themecolor.css"/>
      <!-- ThemeColor end -->
    

    

    
      <!-- gitalk start -->
      <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> -->
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/css/gitalk.css"/>
      <!-- gitalk end -->
    

  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
  href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->

  <!-- ga & ba script hoook -->
  <link rel="canonical" href="https://v-vincen.life/en/JUC-Java-并发编程知识点梳理/">
  <title>
    
      [JUC] Java 并发编程知识点梳理 - JavaDev | 一如Java深似海
    
  </title>
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->

	<body ontouchstart="" class="body--light body--light">


		<!-- ThemeColor -->
		
		<!-- ThemeColor -->
<style type="text/css">
  .body--light {
    --light-mode: none;
    --dark-mode: block;
  }
  .body--dark {
    --light-mode: block;
    --dark-mode: none;
  }
  i.mdui-icon.material-icons.light-mode {
    display: var(--light-mode);
  }
  i.mdui-icon.material-icons.dark-mode {
    display: var(--dark-mode);
  }
</style>
<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons light-mode"></i>
  <i class="mdui-icon material-icons dark-mode"></i>
</div>
<script>
  //getCookieValue
  function getCookieValue(a) {
    var b = document.cookie.match('(^|[^;]+)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b
      ? b.pop()
      : '';
  }
  let themeMode = 'light';
  if (getCookieValue('sb-color-mode') && (getCookieValue('sb-color-mode') !== themeMode)) {
    let dbody = document.body.classList;
    themeMode === 'dark' ? dbody.remove('body--dark') : dbody.add('body--dark');
  }

  //setCookieValue
  var toggleBtn = document.querySelector(".toggle");
  toggleBtn.addEventListener("click", function () {
    var e = document.body.classList.contains("body--dark");
    var cookieString = e
      ? "dark"
      : "light";
    var exp = new Date();
    exp.setTime(exp.getTime() + 3 * 24 * 60 * 60 * 1000); //3天过期
    document.cookie = "sb-color-mode=" + cookieString + ";expires=" + exp.toGMTString() + ";path=/";
  });
</script>

		

		<!-- Gitter -->
		
		<!-- Gitter -->
<!-- Docs:https://gitter.im/?utm_source=left-menu-logo -->
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'hexo-theme-livemylife/blog'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

		

		<!-- 
		<a id="menu-switch"><i class="fa fa-bars fa-lg"></i></a>

		 -->

		<!-- Navigation (contains search)-->
		<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Live My Life</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux: <nav>'s height woule be hold on by its content. so, when navbar scale out, the <nav> will cover tags. also mask any touch event of tags, unfortunately. -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/">HOME</a>
          </li>

          
          
          
          
          <li>
            <a href="/about/">
              
              ABOUT
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/categories/">
              
              CATEGORIES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/archive/">
              
              ARCHIVES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/tags/">
              
              TAGS
              
              
            </a>
          </li>
          
          

          
          <li>
            <a class="popup-trigger">
              <span class="search-icon"></span>SEARCH</a>
          </li>
          

          <!-- LangSelect -->
          
          
          
          
          
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>

<script>
  // Drop Bootstarp low-performance Navbar Use customize navbar with high-quality material design animation in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function() {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>


		<!-- Post Header (contains intro-header、signature、wordcount、busuanzi、waveoverlay) -->
		<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <!-- CDN: jsdelivr start -->
  <style type="text/css">
    .body--light {
      /* intro-header */
      --intro-header-background-image-url-home: url('https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: url('https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/img/header_img/categories_bg3.jpg');
      --intro-header-background-image-url-page: url('https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io//img/header_img/categories_bg3.jpg');
    }
    .body--dark {
      --intro-header-background-image-url-home: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/img/header_img/categories_bg3.jpg');
      --intro-header-background-image-url-page: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io//img/header_img/categories_bg3.jpg');
    }
    header.intro-header {
       /*post*/
        background-image: var(--intro-header-background-image-url-post);
        /* background-image: url('https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/img/header_img/categories_bg3.jpg'); */
      
    }

    
      #signature {/*signature*/
        background-image: url('/img/signature/vincent-white.png');
      }
    
  </style>
  <!-- CDN: jsdelivr end -->





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/tags/#JUC" title="JUC">JUC</a>
              
            </div>
            <h1>[JUC] Java 并发编程知识点梳理</h1>
            <h2 class="subheading">it&#39;s too hard......</h2>
            <span class="meta">
              Posted by Mr.Vincent on
              2021-04-10
            </span>


            
            <!-- WordCount start -->
            <div class="blank_box"></div>
            <span class="meta">
              Estimated Reading Time <span class="post-count">25</span> Minutes
            </span>
            <div class="blank_box"></div>
            <span class="meta">
              Words <span class="post-count">7.1k</span> In Total
            </span>
            <div class="blank_box"></div>
            <!-- WordCount end -->
            
            
            <!-- 不蒜子统计 start -->
            <span class="meta" id="busuanzi_container_page_pv">
              Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
            </span>
            <!-- 不蒜子统计 end -->
            


          </div>
          
        </div>
      </div>
    </div>
  </div>

  
  <!-- waveoverlay start -->
  <div class="preview-overlay">
    <svg class="preview-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
      <defs>
        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
      </defs>
      <g class="preview-parallax">
        <use xlink:href="#gentle-wave" x="48" y="0" fill=var(--gentle-wave1)></use>
        <use xlink:href="#gentle-wave" x="48" y="3" fill=var(--gentle-wave2)></use>
        <use xlink:href="#gentle-wave" x="48" y="5" fill=var(--gentle-wave3)></use>
        <use xlink:href="#gentle-wave" x="48" y="7" fill=var(--gentle-wave)></use>
      </g>
    </svg>
  </div>
  <!-- waveoverlay end -->
  

</header>



		<!-- Main Content (Post contains
	Pager、
	tip、
	socialshare、
	gitalk、gitment、disqus-comment、
	Catalog、
	Sidebar、
	Featured-Tags、
	Friends Blog、
	anchorjs、
	) -->
		<!-- Modify by Yu-Hsuan Yen -->
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1 post-container">

        <h2 id="知识体系系统性梳理">知识体系系统性梳理</h2>
<p><img src="juc.webp" alt="juc"></p>
<h2 id="Java-并发之基础">Java 并发之基础</h2>
<blockquote>
<p>首先全局的了解并发的知识体系，同时了解并发理论基础和线程基础，并发关键字等，这些是理解 Java 并发框架的基础。</p>
</blockquote>
<h3 id="Java-并发-知识体系">Java 并发 - 知识体系</h3>
<h3 id="Java-并发-理论基础">Java 并发 - 理论基础</h3>
<ul>
<li>多线程的出现是要解决什么问题的？</li>
<li>线程不安全是指什么？举例说明</li>
<li>并发出现线程不安全的本质什么？可见性，原子性和有序性。</li>
<li>Java是怎么解决并发问题的？3个关键字，JMM 和8个 Happens-Before。</li>
<li>线程安全是不是非真即假？不是</li>
<li>线程安全有哪些实现思路？</li>
<li>如何理解并发和并行的区别？</li>
</ul>
<h3 id="Java-并发-线程基础">Java 并发 - 线程基础</h3>
<ul>
<li>线程有哪几种状态？分别说明从一种状态到另一种状态转变有哪些方式？</li>
<li>通常线程有哪几种使用方式？</li>
<li>基础线程机制有哪些？</li>
<li>线程的中断方式有哪些？</li>
<li>线程的互斥同步方式有哪些？如何比较和选择？</li>
<li>线程之间有哪些协作方式？</li>
</ul>
<h2 id="并发关键字-volatile、final、synchronized">并发关键字 volatile、final、synchronized</h2>
<h3 id="关键字-synchronized-详解">关键字 synchronized 详解</h3>
<ul>
<li>Synchronized 可以作用在哪里？分别通过对象锁和类锁进行举例。</li>
<li>Synchronized 本质上是通过什么保证线程安全的？分三个方面回答：加锁和释放锁的原理，可重入原理，保证可见性原理。</li>
<li>Synchronized 由什么样的缺陷？Java Lock 是怎么弥补这些缺陷的。</li>
<li>Synchronized 和 Lock 的对比，和选择？</li>
<li>Synchronized 在使用时有何注意事项？</li>
<li>Synchronized 修饰的方法在抛出异常时，会释放锁吗？</li>
<li>多个线程等待同一个 snchronized 锁的时候，JVM 如何选择下一个获取锁的线程？</li>
<li>Synchronized 使得同时只有一个线程可以执行，性能比较差，有什么提升的方法？</li>
<li>我想更加灵活地控制锁的释放和获取（现在释放锁和获取锁的时机都被规定死了），怎么办？</li>
<li>什么是锁的升级和降级？什么是 JVM 里的偏斜锁、轻量级锁、重量级锁？</li>
<li>不同的 JDK 中对 Synchronized 有何优化？</li>
</ul>
<h3 id="关键字-volatile-详解">关键字 volatile 详解</h3>
<ul>
<li>volatile 关键字的作用是什么？</li>
<li>volatile 能保证原子性吗？</li>
<li>之前32位机器上共享的 long 和 double 变量的为什么要用 volatile？现在64位机器上是否也要设置呢？</li>
<li>i++ 为什么不能保证原子性？</li>
<li>volatile 是如何实现可见性的？内存屏障。</li>
<li>volatile 是如何实现有序性的？happens-before 等。</li>
<li>说下 volatile 的应用场景？</li>
</ul>
<h3 id="关键字-final-详解">关键字 final 详解</h3>
<ul>
<li>所有的 final 修饰的字段都是编译期常量吗？</li>
<li>如何理解 private 所修饰的方法是隐式的 final？</li>
<li>说说 final 类型的类如何拓展？比如 String 是 final 类型，我们想写个 MyString 复用所有 String 中方法，同时增加一个新的 toMyString() 的方法，应该如何做？</li>
<li>final 方法可以被重载吗？可以</li>
<li>父类的 final 方法能不能够被子类重写？不可以。</li>
<li>说说 final 域重排序规则？</li>
<li>说说 final 的原理？</li>
<li>使用 final 的限制条件和局限性？</li>
</ul>
<h2 id="JUC-框架">JUC 框架</h2>
<h3 id="Lock-框架和-Tools-类">Lock 框架和 Tools 类</h3>
<p>类结构总览</p>
<p><img src="juctools.webp" alt="juctools"></p>
<h4 id="接口-Condition">接口 Condition</h4>
<p>Condition 为接口类型，它将 Object 监视器方法（wait、notify 和 notifyAll）分解成截然不同的对象，以便通过将这些对象与任意 Lock 实现组合使用，为每个对象提供多个等待 set （wait-set）。其中，Lock 替代了 synchronized 方法和语句的使用，Condition 替代了 Object 监视器方法的使用。可以通过 await()，signal() 来休眠/唤醒线程。</p>
<p>在 JUC 锁：AbstractQueuedSynchonizer 详解中类的内部类 conditionobject 类有具体分析。</p>
<h4 id="接口-Lock">接口 Lock</h4>
<p>Lock 为接口类型，Lock 实现提供了比使用 synchronized 方法和语句可获得的更广泛的锁定操作。此实现允许更灵活的结构，可以具有差别很大的属性，可以支持多个相关的 Condition 对象。</p>
<h4 id="接口-ReadWriteLock">接口 ReadWriteLock</h4>
<p>ReadWriteLock 为接口类型，维护了一对相关的锁，一个用于只读操作，另一个用于写入操作。只要没有 writer，读取锁可以由多个 reader 线程同时保持。写入锁是独占的。</p>
<h4 id="抽象类-AbstractOwnableSynchonizer">抽象类 AbstractOwnableSynchonizer</h4>
<p>AbstractOwnableSynchonizer 为抽象类，可以由线程以独占方式拥有的同步器。此类为创建锁和相关同步器（伴随着所有权的概念）提供了基础。AbstractOwnableSynchronizer 类本身不管理或使用此信息。但是，子类和工具可以使用适当维护的值帮助控制和监视访问以及提供诊断。</p>
<h4 id="抽象类（long）AbstractQueuedLongSynchronizer">抽象类（long）AbstractQueuedLongSynchronizer</h4>
<p>AbstractQueuedLongSynchronizer 为抽象类，以 long 形式维护同步状态的一个 AbstractQueuedSynchronizer 版本。此类具有的结构、属性和方法与 AbstractQueuedSynchronizer 完全相同，但所有与状态相关的参数和结果都定义为 long 而不是 int。当创建需要 64 位状态的多级别锁和屏障等同步器时，此类很有用。</p>
<h4 id="核心抽象类-AbstractQueuedSynchonizer">核心抽象类 AbstractQueuedSynchonizer</h4>
<p>AbstractQueuedSynchonizer 为抽象类，其为实现依赖于先进先出（FIFO） 等待队列的阻塞锁和相关同步器（信号量、事件，等等）提供一个框架。此类的设计目标是成为依靠单个原子 int 值来表示状态的大多数同步器的一个有用基础。</p>
<p>详细分析请看：JUC 锁 AbstractQueuedSynchonizer 详解。</p>
<h4 id="锁常用类-LockSupport">锁常用类 LockSupport</h4>
<p>LockSupport 为常用类，用来创建锁和其他同步类的基本线程阻塞原语。LockSupport 的功能和 Thread 中的 Thread.suspend() 和 Thread.resume() 有点类似，LockSupport 中的 park() 和 unpark() 的作用分别是阻塞线程和解除阻塞线程。但是 park() 和 unpark() 不会遇到 Thread.suspend 和 Thread.resume 所可能引发的死锁问题。</p>
<p>详细分析请看：JUC 锁 LockSupport 详解。</p>
<h4 id="锁常用类-ReentrantLock">锁常用类 ReentrantLock</h4>
<p>ReentrantLock 为常用类，它是一个可重入的互斥锁 Lock，它具有与使用 synchronized 方法和语句所访问的隐式监视器锁相同的一些基本行为和语义，但功能更强大。</p>
<p>详细分析请看：JUC锁 ReentrantLock 详解。</p>
<h4 id="锁常用类-ReentrantReadWriteLock">锁常用类 ReentrantReadWriteLock</h4>
<p>ReentrantReadWriteLock 是读写锁接口 ReadWriteLock 的实现类，它包括 Lock 子类 ReadLock 和 WriteLock。ReadLock 是共享锁，WriteLock 是独占锁。</p>
<p>详细分析请看：JUC 工具类 ReentrantReadWriteLock 详解。</p>
<h4 id="锁常用类-StampedLock">锁常用类 StampedLock</h4>
<p>它是 Java8 在 java.util.concurrent.locks 新增的一个 API。StampedLock 控制锁有三种模式（写，读，乐观读），一个 StampedLock 状态是由版本和模式两个部分组成，锁获取方法返回一个数字作为票据 stamp，它用相应的锁状态表示并控制访问，数字0表示没有写锁被授权访问。在读锁上分为悲观锁和乐观锁。</p>
<p>详细分析请看: Java 8 StampedLock 详解。</p>
<h4 id="工具常用类-CountDownLatch">工具常用类 CountDownLatch</h4>
<p>CountDownLatch 为常用类，它是一个同步辅助类，在完成一组正在其他线程中执行的操作之前，它允许一个或多个线程一直等待。</p>
<p>详细分析请看: JUC 工具类 CountDownLatch 详解。</p>
<h4 id="工具常用类-CyclicBarrier">工具常用类 CyclicBarrier</h4>
<p>CyclicBarrier 为常用类，其是一个同步辅助类，它允许一组线程互相等待，直到到达某个公共屏障点（common barrier point）。在涉及一组固定大小的线程的程序中，这些线程必须不时地互相等待，此时 CyclicBarrier 很有用。因为该 barrier 在释放等待线程后可以重用，所以称它为循环 的 barrier。</p>
<p>详细分析请看: JUC 工具类 CyclicBarrier详解。</p>
<h4 id="工具常用类-Phaser">工具常用类 Phaser</h4>
<p>Phaser 是 JDK 7 新增的一个同步辅助类，它可以实现 CyclicBarrier 和 CountDownLatch 类似的功能，而且它支持对任务的动态调整，并支持分层结构来达到更高的吞吐量。</p>
<p>详细分析请看：JUC 工具类 Phaser 详解。</p>
<h4 id="工具常用类-Semaphore">工具常用类 Semaphore</h4>
<p>Semaphore 为常用类，其是一个计数信号量，从概念上讲，信号量维护了一个许可集。如有必要，在许可可用前会阻塞每一个 acquire()，然后再获取该许可。每个 release() 添加一个许可，从而可能释放一个正在阻塞的获取者。但是，不使用实际的许可对象，Semaphore 只对可用许可的号码进行计数，并采取相应的行动。通常用于限制可以访问某些资源（物理或逻辑的）的线程数目。</p>
<p>详细分析请看: JUC 工具类 Semaphore 详解。</p>
<h4 id="工具常用类-Exchanger">工具常用类 Exchanger</h4>
<p>Exchanger 是用于线程协作的工具类, 主要用于两个线程之间的数据交换。它提供一个同步点，在这个同步点，两个线程可以交换彼此的数据。这两个线程通过 exchange() 方法交换数据，当一个线程先执行 exchange() 方法后，它会一直等待第二个线程也执行 exchange() 方法，当这两个线程到达同步点时，这两个线程就可以交换数据了。</p>
<p>详细分析请看：JUC 工具类 Exchanger 详解。</p>
<h3 id="Collections-并发集合">Collections 并发集合</h3>
<p>类结构关系</p>
<p><img src="collection.webp" alt="collection"></p>
<h4 id="Queue-–-ArrayBlockingQueue">Queue – ArrayBlockingQueue</h4>
<p>一个由数组支持的有界阻塞队列。此队列按 FIFO（先进先出）原则对元素进行排序。队列的头部是在队列中存在时间最长的元素。队列的尾部是在队列中存在时间最短的元素。新元素插入到队列的尾部，队列获取操作则是从队列头部开始获得元素。</p>
<p>详细分析请看：JUC 并发集合 BlockingQueue 详解。</p>
<h4 id="Queue-–-LinkedBlockingQueue">Queue – LinkedBlockingQueue</h4>
<p>一个基于已链接节点的、范围任意的 blocking queue。此队列按 FIFO（先进先出）排序元素。队列的头部是在队列中时间最长的元素。队列的尾部是在队列中时间最短的元素。新元素插入到队列的尾部，并且队列获取操作会获得位于队列头部的元素。链接队列的吞吐量通常要高于基于数组的队列，但是在大多数并发应用程序中，其可预知的性能要低。</p>
<p>详细分析请看：JUC 并发集合 BlockingQueue 详解。</p>
<h4 id="Queue-–-LinkedBlockingDeque">Queue – LinkedBlockingDeque</h4>
<p>一个基于已链接节点的、任选范围的阻塞双端队列。</p>
<p>详细分析请看：JUC 并发集合 – BlockingQueue 详解。</p>
<h4 id="Queue-–-ConcurrentLinkedQueue">Queue – ConcurrentLinkedQueue</h4>
<p>一个基于链接节点的无界线程安全队列。此队列按照 FIFO（先进先出）原则对元素进行排序。队列的头部 是队列中时间最长的元素。队列的尾部 是队列中时间最短的元素。新的元素插入到队列的尾部，队列获取操作从队列头部获得元素。当多个线程共享访问一个公共 collection 时，ConcurrentLinkedQueue 是一个恰当的选择。此队列不允许使用 null 元素。</p>
<p>详细分析请看：JUC 并发集合 ConcurrentLinkedQueue 详解。</p>
<h4 id="Queue-–-ConcurrentLinkedDeque">Queue – ConcurrentLinkedDeque</h4>
<p>是双向链表实现的无界队列，该队列同时支持 FIFO 和 FILO 两种操作方式。</p>
<h4 id="Queue-–-DelayQueue">Queue – DelayQueue</h4>
<p>延时无界阻塞队列，使用 Lock 机制实现并发访问。队列里只允许放可以“延期”的元素，队列中的 head 是最先“到期”的元素。如果队里中没有元素到“到期”，那么就算队列中有元素也不能获取到。</p>
<h4 id="Queue-–-PriorityBlockingQueue">Queue – PriorityBlockingQueue</h4>
<p>无界优先级阻塞队列，使用 Lock 机制实现并发访问。PriorityQueue 的线程安全版，不允许存放 null 值，依赖于 comparable 的排序，不允许存放不可比较的对象类型。</p>
<h4 id="Queue-–-SynchronousQueue">Queue – SynchronousQueue</h4>
<p>没有容量的同步队列，通过 CAS 实现并发访问，支持 FIFO 和 FILO。</p>
<h4 id="Queue-–-LinkedTransferQueue">Queue – LinkedTransferQueue</h4>
<p>JDK 7 新增，单向链表实现的无界阻塞队列，通过 CAS 实现并发访问，队列元素使用 FIFO（先进先出）方式。LinkedTransferQueue 可以说是 ConcurrentLinkedQueue、SynchronousQueue（公平模式）和 LinkedBlockingQueue 的超集, 它不仅仅综合了这几个类的功能，同时也提供了更高效的实现。</p>
<h4 id="List-–-CopyOnWriteArrayList">List – CopyOnWriteArrayList</h4>
<p>ArrayList 的一个线程安全的变体，其中所有可变操作（add、set 等等）都是通过对底层数组进行一次新的复制来实现的。这一般需要很大的开销，但是当遍历操作的数量大大超过可变操作的数量时，这种方法可能比其他替代方法更有效。在不能或不想进行同步遍历，但又需要从并发线程中排除冲突时，它也很有用。</p>
<p>详细分析请看：JUC 并发集合 CopyOnWriteArrayList 详解。</p>
<h4 id="Set-–-CopyOnWriteArraySet">Set – CopyOnWriteArraySet</h4>
<p>对其所有操作使用内部 CopyOnWriteArrayList 的 Set。即将所有操作转发至 CopyOnWriteArayList 来进行操作，能够保证线程安全。在 add 时，会调用 addIfAbsent，由于每次 add 时都要进行数组遍历，因此性能会略低于 CopyOnWriteArrayList。</p>
<h4 id="Set-–-ConcurrentSkipListSet">Set – ConcurrentSkipListSet</h4>
<p>一个基于 ConcurrentSkipListMap 的可缩放并发 NavigableSet 实现。set 的元素可以根据它们的自然顺序进行排序，也可以根据创建 set 时所提供的 Comparator 进行排序，具体取决于使用的构造方法。</p>
<h4 id="Map-–-ConcurrentHashMap">Map – ConcurrentHashMap</h4>
<p>是线程安全 HashMap 的。ConcurrentHashMap 在 JDK 7 之前是通过 Lock 和 segment（分段锁）实现，JDK 8 之后改为 CAS + synchronized 来保证并发安全。</p>
<p>详细分析请看：JUC 并发集合 ConcurrentHashMap 详解, 包含了对 JDK 7 和 JDK 8 版本的源码分析。</p>
<h4 id="Map-–-ConcurrentSkipListMap">Map – ConcurrentSkipListMap</h4>
<p>线程安全的有序的哈希表（相当于线程安全的 TreeMap）；映射可以根据键的自然顺序进行排序，也可以根据创建映射时所提供的 Comparator 进行排序，具体取决于使用的构造方法。</p>
<h3 id="Atomic-原子类">Atomic 原子类</h3>
<p>其基本的特性就是在多线程环境下，当有多个线程同时执行这些类的实例包含的方法时，具有排他性，即当某个线程进入方法，执行其中的指令时，不会被其他线程打断，而别的线程就像自旋锁一样，一直等到该方法执行完成，才由 JVM 从等待队列中选择一个另一个线程进入，这只是一种逻辑上的理解。实际上是借助硬件的相关指令来实现的，不会阻塞线程（或者说只是在硬件级别上阻塞了）。</p>
<p>对 CAS，Unsafe 类，以及13个原子类详解请参考：JUC 原子类 CAS，Unsafe 和原子类详解。</p>
<h4 id="基础类型-AtomicBoolean，AtomicInteger，AtomicLong">基础类型 AtomicBoolean，AtomicInteger，AtomicLong</h4>
<p>AtomicBoolean，AtomicInteger，AtomicLong 是类似的，分别针对 bool，interger，long 的原子类。</p>
<h4 id="数组-AtomicIntegerArray，AtomicLongArray，BooleanArray">数组 AtomicIntegerArray，AtomicLongArray，BooleanArray</h4>
<p>AtomicIntegerArray，AtomicLongArray，AtomicBooleanArray 是数组原子类。</p>
<h4 id="引用-AtomicReference，AtomicMarkedReference，AtomicStampedReference">引用 AtomicReference，AtomicMarkedReference，AtomicStampedReference</h4>
<p>AtomicReference，AtomicMarkedReference，AtomicStampedReference 是引用相关的原子类。</p>
<h4 id="FieldUpdater：AtomicLongFieldUpdater，AtomicIntegerFieldUpdater，AtomicReferenceFieldUpdater">FieldUpdater：AtomicLongFieldUpdater，AtomicIntegerFieldUpdater，AtomicReferenceFieldUpdater</h4>
<p>AtomicLongFieldUpdater，AtomicIntegerFieldUpdater，AtomicReferenceFieldUpdater 是 FieldUpdater 原子类。</p>
<h2 id="Executors-线程池">Executors 线程池</h2>
<p>类结构关系</p>
<p><img src="executors.webp" alt="executors"></p>
<h3 id="接口-Executor">接口 Executor</h3>
<p>Executor 接口提供一种将任务提交与每个任务将如何运行的机制(包括线程使用的细节、调度等)分离开来的方法。通常使用 Executor 而不是显式地创建线程。</p>
<h3 id="ExecutorService">ExecutorService</h3>
<p>ExecutorService 继承自 Executor 接口，ExecutorService 提供了管理终止的方法，以及可为跟踪一个或多个异步任务执行状况而生成 Future 的方法。可以关闭 ExecutorService，这将导致其停止接受新任务。关闭后，执行程序将最后终止，这时没有任务在执行，也没有任务在等待执行，并且无法提交新任务。</p>
<h3 id="ScheduledExecutorService">ScheduledExecutorService</h3>
<p>ScheduledExecutorService 继承自 ExecutorService 接口，可安排在给定的延迟后运行或定期执行的命令。</p>
<h3 id="AbstractExecutorService">AbstractExecutorService</h3>
<p>AbstractExecutorService 继承自 ExecutorService 接口，其提供 ExecutorService 执行方法的默认实现。此类使用 newTaskFor 返回的 RunnableFuture 实现 submit、invokeAny 和 invokeAll 方法，默认情况下，RunnableFuture 是此包中提供的 FutureTask 类。</p>
<h3 id="FutureTask">FutureTask</h3>
<p>FutureTask 为 Future 提供了基础实现，如获取任务执行结果（get）和取消任务（cancel）等。如果任务尚未完成，获取任务执行结果时将会阻塞。一旦执行结束，任务就不能被重启或取消（除非使用 runAndReset 执行计算）。FutureTask 常用来封装 Callable 和 Runnable，也可以作为一个任务提交到线程池中执行。除了作为一个独立的类之外，此类也提供了一些功能性函数供我们创建自定义 task 类使用。FutureTask 的线程安全由 CAS 来保证。</p>
<p>详细分析请看: JUC 线程池 FutureTask 详解。</p>
<h3 id="核心-–-ThreadPoolExecutor">核心 – ThreadPoolExecutor</h3>
<p>ThreadPoolExecutor 实现了 AbstractExecutorService 接口，也是一个 ExecutorService，它使用可能的几个池线程之一执行每个提交的任务，通常使用 Executors 工厂方法配置。线程池可以解决两个不同问题: 由于减少了每个任务调用的开销，它们通常可以在执行大量异步任务时提供增强的性能，并且还可以提供绑定和管理资源（包括执行任务集时使用的线程）的方法。每个 ThreadPoolExecutor 还维护着一些基本的统计数据，如完成的任务数。</p>
<p>详细分析请看: JUC 线程池 ThreadPoolExecutor详解。</p>
<h3 id="核心-–-ScheduledThreadExecutor">核心 – ScheduledThreadExecutor</h3>
<p>ScheduledThreadPoolExecutor 实现 ScheduledExecutorService 接口，可安排在给定的延迟后运行命令，或者定期执行命令。需要多个辅助线程时，或者要求 ThreadPoolExecutor 具有额外的灵活性或功能时，此类要优于 Timer。</p>
<p>详细分析请看: JUC 线程池 ScheduledThreadExecutor 详解。</p>
<h3 id="核心-–-Fork-Join-框架">核心 – Fork/Join 框架</h3>
<p>ForkJoinPool 是 JDK 7加入的一个线程池类。Fork/Join 技术是分治算法（Divide-and-Conquer）的并行实现，它是一项可以获得良好的并行性能的简单且高效的设计技术。目的是为了帮助我们更好地利用多处理器带来的好处，使用所有可用的运算能力来提升应用的性能。</p>
<p>详细分析请看: JUC 线程池 Fork/Join 框架详解。</p>
<h3 id="工具类-–-Executors">工具类 –  Executors</h3>
<p>Executors是一个工具类，用其可以创建 ExecutorService、ScheduledExecutorService、ThreadFactory、Callable 等对象。它的使用融入到了 ThreadPoolExecutor， ScheduledThreadExecutor 和 ForkJoinPool 中。</p>
<h2 id="JUC-框架重点面试题详解">JUC 框架重点面试题详解</h2>
<p>Java 并发之 JUC 框架：然后需要对 JUC 框架五大类详细解读，包括：Lock 框架，并发集合, 原子类, 线程池和工具类。JUC 类汇总和学习指南。</p>
<ul>
<li>JUC 框架包含几个部分？</li>
<li>每个部分有哪些核心的类？</li>
<li>最最核心的类有哪些？</li>
</ul>
<h3 id="CAS-及原子类">CAS 及原子类</h3>
<p>CAS 及原子类：从最核心的 CAS, Unsafe 和原子类开始分析。</p>
<ul>
<li>线程安全的实现方法有哪些？</li>
<li>什么是 CAS？</li>
<li>CAS 使用示例，结合 AtomicInteger 给出示例？</li>
<li>CAS 会有哪些问题？</li>
<li>针对这这些问题，Java 提供了哪几个解决的？</li>
<li>AtomicInteger 底层实现？CAS + volatile。</li>
<li>请阐述你对 Unsafe 类的理解？</li>
<li>说说你对 Java 原子类的理解？包含13个，4组分类，说说作用和使用场景。</li>
<li>AtomicStampedReference 是什么？</li>
<li>AtomicStampedReference 是怎么解决 ABA 的？内部使用 Pair 来存储元素值及其版本号。</li>
<li>java 中还有哪些类可以解决 ABA 的问题？AtomicMarkableReference。</li>
</ul>
<h3 id="锁">锁</h3>
<p>锁：然后分析 JUC 中锁。</p>
<h4 id="LockSupport-详解">LockSupport 详解</h4>
<ul>
<li>为什么 LockSupport 也是核心基础类？AQS 框架借助于两个类：Unsafe（提供CAS操作）和 LockSupport（提供 park/unpark 操作）。</li>
<li>写出分别通过 wait、notify 和 LockSupport 的 park、unpark 实现同步？</li>
<li>LockSupport.park() 会释放锁资源吗？那么 Condition.await() 呢？</li>
<li>Thread.sleep()、Object.wait()、Condition.await()、LockSupport.park() 的区别？重点</li>
<li>如果在 wait() 之前执行了 notify() 会怎样？</li>
<li>如果在 park() 之前执行了 unpark() 会怎样？</li>
</ul>
<h4 id="锁核心类-AQS-详解">锁核心类 AQS 详解</h4>
<ul>
<li>什么是AQS？为什么它是核心?</li>
<li>AQS 的核心思想是什么？它是怎么实现的？底层数据结构等。</li>
<li>AQS 有哪些核心的方法？</li>
<li>AQS 定义什么样的资源获取方式？AQS 定义了两种资源获取方式：独占（只有一个线程能访问执行，又根据是否按队列的顺序分为公平锁和非公平锁，如 ReentrantLock）和共享（多个线程可同时访问执行，如 Semaphore、CountDownLatch、 CyclicBarrier ）。ReentrantReadWriteLock 可以看成是组合式，允许多个线程同时对某一资源进行读。</li>
<li>AQS 底层使用了什么样的设计模式？模板。</li>
<li>AQS 的应用示例？</li>
</ul>
<h4 id="ReentrantLock-详解">ReentrantLock 详解</h4>
<ul>
<li>什么是可重入，什么是可重入锁？它用来解决什么问题？</li>
<li>ReentrantLock 的核心是 AQS，那么它怎么来实现的，继承吗？说说其类内部结构关系。</li>
<li>ReentrantLock 是如何实现公平锁的？</li>
<li>ReentrantLock 是如何实现非公平锁的？</li>
<li>ReentrantLock 默认实现的是公平还是非公平锁？</li>
<li>使用 ReentrantLock 实现公平和非公平锁的示例？</li>
<li>ReentrantLock 和 Synchronized 的对比？</li>
</ul>
<h4 id="ReentrantReadWriteLock-详解">ReentrantReadWriteLock 详解</h4>
<ul>
<li>为了有了 ReentrantLock 还需要 ReentrantReadWriteLock？</li>
<li>ReentrantReadWriteLock 底层实现原理？</li>
<li>ReentrantReadWriteLock 底层读写状态如何设计的？高16位为读锁，低16位为写锁。</li>
<li>读锁和写锁的最大数量是多少？</li>
<li>本地线程计数器 ThreadLocalHoldCounter 是用来做什么的？</li>
<li>缓存计数器 HoldCounter 是用来做什么的？</li>
<li>写锁的获取与释放是怎么实现的？</li>
<li>读锁的获取与释放是怎么实现的？</li>
<li>RentrantReadWriteLock 为什么不支持锁升级？</li>
<li>什么是锁的升降级？RentrantReadWriteLock 为什么不支持锁升级？</li>
</ul>
<h3 id="集合">集合</h3>
<p>集合：再理解 JUC 中重要的支持并发的集合。</p>
<h4 id="ConcurrentHashMap-详解">ConcurrentHashMap 详解</h4>
<ul>
<li>为什么 HashTable 慢? 它的并发度是什么？那么 ConcurrentHashMap 并发度是什么？</li>
<li>ConcurrentHashMap 在 JDK1.7 和 JDK1.8 中实现有什么差别？JDK1.8 解決了 JDK1.7 中什么问题。</li>
<li>ConcurrentHashMap JDK1.7 实现的原理是什么？分段锁机制。</li>
<li>ConcurrentHashMap JDK1.8 实现的原理是什么？数组+链表+红黑树，CAS。</li>
<li>ConcurrentHashMap JDK1.7 中 Segment 数（concurrencyLevel）默认值是多少？为何一旦初始化就不可再扩容？</li>
<li>ConcurrentHashMap JDK1.7 说说其 put 的机制？</li>
<li>ConcurrentHashMap JDK1.7 是如何扩容的？rehash（注：segment 数组不能扩容，扩容是 segment 数组某个位置内部的数组 HashEntry&lt;K,V&gt;[] 进行扩容）</li>
<li>ConcurrentHashMap JDK1.8 是如何扩容的？tryPresize。</li>
<li>ConcurrentHashMap JDK1.8 链表转红黑树的时机是什么？临界值为什么是8？</li>
<li>ConcurrentHashMap JDK1.8 是如何进行数据迁移的？transfer。</li>
</ul>
<h4 id="CopyOnWriteArrayList-详解">CopyOnWriteArrayList 详解</h4>
<ul>
<li>请先说说非并发集合中 Fail-fast 机制？</li>
<li>再为什么说 ArrayList 查询快而增删慢？</li>
<li>对比 ArrayList 说说 CopyOnWriteArrayList 的增删改查实现原理? COW 基于拷贝。</li>
<li>再说下弱一致性的迭代器原理是怎么样的？COWIterator<E>。</li>
<li>CopyOnWriteArrayList 为什么并发安全且性能比 Vector 好？</li>
<li>CopyOnWriteArrayList 有何缺陷，说说其应用场景？</li>
</ul>
<h4 id="ConcurrentLinkedQueue-详解">ConcurrentLinkedQueue 详解</h4>
<ul>
<li>要想用线程安全的队列有哪些选择？Vector，Collections.synchronizedList( List<T> list), ConcurrentLinkedQueue 等</li>
<li>ConcurrentLinkedQueue 实现的数据结构？</li>
<li>ConcurrentLinkedQueue 底层原理？全程无锁（CAS）。</li>
<li>ConcurrentLinkedQueue 的核心方法有哪些？offer()，poll()，peek()，isEmpty() 等队列常用方法。</li>
<li>说说 ConcurrentLinkedQueue 的 HOPS（延迟更新的策略）的设计？</li>
<li>ConcurrentLinkedQueue 适合什么样的使用场景？</li>
</ul>
<h4 id="BlockingQueue-详解">BlockingQueue 详解</h4>
<ul>
<li>什么是 BlockingDeque？</li>
<li>BlockingQueue 大家族有哪些？ArrayBlockingQueue, DelayQueue, LinkedBlockingQueue, SynchronousQueue…</li>
<li>BlockingQueue 适合用在什么样的场景？</li>
<li>BlockingQueue 常用的方法？</li>
<li>BlockingQueue 插入方法有哪些？这些方法 add(o)、offer(o)、put(o)、offer(o, timeout, timeunit) 的区别是什么？</li>
<li>BlockingDeque 与 BlockingQueue 有何关系，请对比下它们的方法？</li>
<li>BlockingDeque 适合用在什么样的场景？</li>
<li>BlockingDeque 大家族有哪些？</li>
<li>BlockingDeque 与 BlockingQueue 实现例子？</li>
</ul>
<h3 id="线程池">线程池</h3>
<p>线程池：再者分析 JUC 中非常常用的线程池等。</p>
<h4 id="FutureTask-详解">FutureTask 详解</h4>
<ul>
<li>FutureTask 用来解决什么问题的？为什么会出现？</li>
<li>FutureTask 类结构关系怎么样的？</li>
<li>FutureTask 的线程安全是由什么保证的？</li>
<li>FutureTask 结果返回机制？</li>
<li>FutureTask 内部运行状态的转变？</li>
<li>FutureTask 通常会怎么用？举例说明。</li>
</ul>
<h4 id="ThreadPoolExecutor-详解">ThreadPoolExecutor 详解</h4>
<ul>
<li>为什么要有线程池？</li>
<li>Java 是实现和管理线程池有哪些方式？请简单举例如何使用。</li>
<li>为什么很多公司不允许使用 Executors 去创建线程池？那么推荐怎么使用呢？</li>
<li>ThreadPoolExecutor 有哪些核心的配置参数？请简要说明。</li>
<li>ThreadPoolExecutor 可以创建哪三种线程池呢？</li>
<li>当队列满了并且 worker 的数量达到 maxSize 的时候，会怎么样？</li>
<li>说说 ThreadPoolExecutor 有哪些 RejectedExecutionHandler 策略？默认是什么策略？</li>
<li>简要说下线程池的任务执行机制？execute –&gt; addWorker –&gt;runworker (getTask)。</li>
<li>线程池中任务是如何提交的？</li>
<li>线程池中任务是如何关闭的？</li>
<li>在配置线程池的时候需要考虑哪些配置因素？</li>
<li>如何监控线程池的状态？</li>
</ul>
<h4 id="ScheduledThreadPool-详解">ScheduledThreadPool 详解</h4>
<ul>
<li>ScheduledThreadPoolExecutor 要解决什么样的问题？</li>
<li>ScheduledThreadPoolExecutor 相比 ThreadPoolExecutor 有哪些特性？</li>
<li>ScheduledThreadPoolExecutor 有什么样的数据结构，核心内部类和抽象类？</li>
<li>ScheduledThreadPoolExecutor 有哪两个关闭策略？区别是什么？</li>
<li>ScheduledThreadPoolExecutor 中 scheduleAtFixedRate 和 scheduleWithFixedDelay 区别是什么？</li>
<li>为什么 ThreadPoolExecutor 的调整策略却不适用于 ScheduledThreadPoolExecutor？</li>
<li>Executors 提供了几种方法来构造 ScheduledThreadPoolExecutor？</li>
</ul>
<h4 id="Fork-Join-框架详解">Fork/Join 框架详解</h4>
<ul>
<li>Fork/Join 主要用来解决什么样的问题？</li>
<li>Fork/Join 框架是在哪个 JDK 版本中引入的？</li>
<li>Fork/Join 框架主要包含哪三个模块？模块之间的关系是怎么样的？</li>
<li>ForkJoinPool 类继承关系？</li>
<li>ForkJoinTask 抽象类继承关系？在实际运用中，我们一般都会继承 RecursiveTask 、RecursiveAction 或 CountedCompleter 来实现我们的业务需求，而不会直接继承 ForkJoinTask 类。</li>
<li>整个 Fork/Join 框架的执行流程、运行机制是怎么样的？</li>
<li>具体阐述 Fork/Join 的分治思想和 work-stealing 实现方式？</li>
<li>有哪些 JDK 源码中使用了 Fork/Join 思想？</li>
<li>如何使用 Executors 工具类创建 ForkJoinPool?</li>
<li>写一个例子: 用 ForkJoin 方式实现 1+2+3+…+100000?</li>
<li>Fork/Join 在使用时有哪些注意事项？结合 JDK 中的斐波那契数列实例具体说明。</li>
</ul>
<h3 id="工具类">工具类</h3>
<p>工具类：最后来看下 JUC 中有哪些工具类，以及线程隔离术 ThreadLocal。</p>
<h4 id="CountDownLatch-详解">CountDownLatch 详解</h4>
<ul>
<li>什么是 CountDownLatch？</li>
<li>CountDownLatch 底层实现原理？</li>
<li>CountDownLatch 一次可以唤醒几个任务？多个。</li>
<li>CountDownLatch 有哪些主要方法？await()、countDown()、</li>
<li>CountDownLatch适用于什么场景？</li>
<li>写道题：实现一个容器，提供两个方法，add，size 写两个线程，线程1添加10个元素到容器中，线程2实现监控元素的个数，当个数到5个时，线程2给出提示并结束? 使用 CountDownLatch 代替 wait、notify 好处。</li>
</ul>
<h4 id="CyclicBarrier-详解">CyclicBarrier 详解</h4>
<ul>
<li>什么是 CyclicBarrier？</li>
<li>CyclicBarrier 底层实现原理？</li>
<li>CountDownLatch 和 CyclicBarrier 对比？</li>
<li>CyclicBarrier 的核心函数有哪些？</li>
<li>CyclicBarrier 适用于什么场景？</li>
</ul>
<h4 id="Semaphore-详解">Semaphore 详解</h4>
<ul>
<li>什么是 Semaphore？</li>
<li>Semaphore 内部原理？</li>
<li>Semaphore 常用方法有哪些？如何实现线程同步和互斥的？</li>
<li>Semaphore 适合用在什么场景？</li>
<li>单独使用 Semaphore 是不会使用到 AQS 的条件队列？</li>
<li>Semaphore 中申请令牌 acquire、释放令牌 release 的实现？</li>
<li>Semaphore 初始化有10个令牌，11个线程同时各调用1次 acquire 方法，会发生什么？</li>
<li>Semaphore 初始化有10个令牌，一个线程重复调用11次 acquire 方法，会发生什么？</li>
<li>Semaphore 初始化有1个令牌，1个线程调用一次 acquire 方法，然后调用两次 release 方法，之后另外一个线程调用 acquire 方法，此线程能够获取到足够的令牌并继续运行吗？</li>
<li>Semaphore 初始化有2个令牌，一个线程调用1次 release 方法，然后一次性获取3个令牌，会获取到吗？</li>
</ul>
<h4 id="Phaser-详解">Phaser 详解</h4>
<ul>
<li>Phaser 主要用来解决什么问题？</li>
<li>Phaser 与 CyclicBarrier 和 CountDownLatch 的区别是什么？</li>
<li>如果用 CountDownLatch 来实现 Phaser 的功能应该怎么实现？</li>
<li>Phaser 运行机制是什么样的？</li>
<li>给一个 Phaser 使用的示例？</li>
</ul>
<h4 id="Exchanger-详解">Exchanger 详解</h4>
<ul>
<li>Exchanger 主要解决什么问题？</li>
<li>对比 SynchronousQueue，为什么说 Exchanger 可被视为 SynchronousQueue 的双向形式？</li>
<li>Exchanger 在不同的 JDK 版本中实现有什么差别？</li>
<li>Exchanger 实现机制？</li>
<li>Exchanger 已经有了 slot 单节点，为什么会加入 arena node 数组？什么时候会用到数组？</li>
<li>arena 可以确保不同的 slot 在 arena 中是不会相冲突的，那么是怎么保证的呢？</li>
<li>什么是伪共享，Exchanger 中如何体现的？</li>
<li>Exchanger 实现举例。</li>
</ul>
<h4 id="ThreadLocal-详解">ThreadLocal 详解</h4>
<ul>
<li>什么是ThreadLocal？用来解决什么问题的？</li>
<li>说说你对 ThreadLocal 的理解。</li>
<li>ThreadLocal 是如何实现线程隔离的？</li>
<li>为什么 ThreadLocal 会造成内存泄露？如何解决。</li>
<li>还有哪些使用 ThreadLocal 的应用场景？</li>
</ul>


        <hr>
        <!-- Pager -->
        <ul class="pager">
          
          <li class="previous">
            <a href="/en/JDK8-9-Map-几个新方法/" data-toggle="tooltip" data-placement="top" title="[JDK8] 9 Map 几个新方法">&larr; Previous Post</a>
          </li>
          
          
          <li class="next">
            <a href="/en/How-to-apply-JsDelivr-CDN-in-Hexo-theme-livemylife-Theme/" data-toggle="tooltip" data-placement="top" title="How to apply JsDelivr CDN in Hexo-theme-livemylife Theme">Next Post &rarr;</a>
          </li>
          
        </ul>

        
        <!-- tip start -->
        <!-- tip -->
<!-- tip start -->
<div class="tip">
  <p>
    
      If you like this blog or find it useful for you, you are welcome to comment on it. You are also welcome to share this blog, so that more people can participate in it. If the images used in the blog infringe your copyright, please contact the author to delete them. Thank you !
    
  </p>
</div>
<!-- tip end -->

        <!-- tip end -->
        

        
        <!-- Sharing Srtart -->
        <!-- Social Social Share Post -->
<!-- Docs:https://github.com/overtrue/share.js -->

<div class="social-share" data-initialized="true" data-disabled="tencent ,douban ,qzone ,linkedin ,facebook ,google ,diandian" data-wechat-qrcode-helper="" align="center">
  <ul class="list-inline text-center social-share-ul">
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-twitter">
        <i class="fa fa-twitter fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a class="social-share-icon icon-wechat">
        <i class="fa fa-weixin fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-weibo">
        <i class="fa fa-weibo fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-qq">
        <i class="fa fa-qq fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon" href="mailto:?subject=[JUC] Java 并发编程知识点梳理&body=Hi,I found this website and thought you might like it https://v-vincen.life/en/JUC-Java-并发编程知识点梳理/">
        <i class="fa fa-envelope fa-1x" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
</div>

<!-- css & js -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"> -->
<script defer="defer" async="true" src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

        <!-- Sharing End -->
        
        <hr>

        <!-- comments start -->
        <!-- 1. gitalk comment -->

  <!-- gitalk start -->
  <!-- Docs:https://github.com/gitalk/gitalk/blob/master/readme-cn.md -->

  <div id="gitalk-container"></div>

  
    <script src="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/js/comment/gitalk.js"></script>
  

  <script>
    var gitalk = new Gitalk({
      clientID: 'c5c071e55f689f41560d',
      clientSecret: '1e8aabf73ccb26e519ee937ea1ddd241c5d13b79',
      repo: 'blog-comment',
      owner: 'V-Vincen',
      admin: 'V-Vincen',
      id: 'Sat Apr 10 2021 19:23:22 GMT+0800', // Ensure uniqueness and length less than 50
      distractionFreeMode: false, // Facebook-like distraction free mode
      perPage: 10,
      pagerDirection: 'last',
      createIssueManually: false,
      language: 'en',
      proxy: 'https://www.v-vincen.icu/login/oauth/access_token'
    });
    gitalk.render('gitalk-container');

    var gtFolded = () => {
      setTimeout(function () {
        let markdownBody = document.getElementsByClassName("markdown-body");
        let list = Array.from(markdownBody);
        list.forEach(item => {
          if (item.clientHeight > 250) {
            item.classList.add('gt-comment-body-folded');
            item.style.maxHeight = '250px';
            item.title = 'Click to Expand';
            item.onclick = function () {
              item.classList.remove('gt-comment-body-folded');
              item.style.maxHeight = '';
              item.title = '';
              item.onclick = null;
            };
          }
        })
      }, 800);
    }
  </script>

  <!-- gitalk end -->


<!-- 2. gitment comment -->


<!-- 3. disqus comment -->


        <!-- comments end -->
        <hr>

      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB%E7%B3%BB%E7%BB%9F%E6%80%A7%E6%A2%B3%E7%90%86"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">知识体系系统性梳理</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Java-%E5%B9%B6%E5%8F%91%E4%B9%8B%E5%9F%BA%E7%A1%80"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">Java 并发之基础</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Java-%E5%B9%B6%E5%8F%91-%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">Java 并发 - 知识体系</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Java-%E5%B9%B6%E5%8F%91-%E7%90%86%E8%AE%BA%E5%9F%BA%E7%A1%80"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">Java 并发 - 理论基础</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Java-%E5%B9%B6%E5%8F%91-%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80"><span class="toc-nav-number">2.3.</span> <span class="toc-nav-text">Java 并发 - 线程基础</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%B9%B6%E5%8F%91%E5%85%B3%E9%94%AE%E5%AD%97-volatile%E3%80%81final%E3%80%81synchronized"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">并发关键字 volatile、final、synchronized</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97-synchronized-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text">关键字 synchronized 详解</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97-volatile-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text">关键字 volatile 详解</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97-final-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text">关键字 final 详解</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#JUC-%E6%A1%86%E6%9E%B6"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">JUC 框架</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Lock-%E6%A1%86%E6%9E%B6%E5%92%8C-Tools-%E7%B1%BB"><span class="toc-nav-number">4.1.</span> <span class="toc-nav-text">Lock 框架和 Tools 类</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%8E%A5%E5%8F%A3-Condition"><span class="toc-nav-number">4.1.1.</span> <span class="toc-nav-text">接口 Condition</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%8E%A5%E5%8F%A3-Lock"><span class="toc-nav-number">4.1.2.</span> <span class="toc-nav-text">接口 Lock</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%8E%A5%E5%8F%A3-ReadWriteLock"><span class="toc-nav-number">4.1.3.</span> <span class="toc-nav-text">接口 ReadWriteLock</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%8A%BD%E8%B1%A1%E7%B1%BB-AbstractOwnableSynchonizer"><span class="toc-nav-number">4.1.4.</span> <span class="toc-nav-text">抽象类 AbstractOwnableSynchonizer</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%8A%BD%E8%B1%A1%E7%B1%BB%EF%BC%88long%EF%BC%89AbstractQueuedLongSynchronizer"><span class="toc-nav-number">4.1.5.</span> <span class="toc-nav-text">抽象类（long）AbstractQueuedLongSynchronizer</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%A0%B8%E5%BF%83%E6%8A%BD%E8%B1%A1%E7%B1%BB-AbstractQueuedSynchonizer"><span class="toc-nav-number">4.1.6.</span> <span class="toc-nav-text">核心抽象类 AbstractQueuedSynchonizer</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E9%94%81%E5%B8%B8%E7%94%A8%E7%B1%BB-LockSupport"><span class="toc-nav-number">4.1.7.</span> <span class="toc-nav-text">锁常用类 LockSupport</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E9%94%81%E5%B8%B8%E7%94%A8%E7%B1%BB-ReentrantLock"><span class="toc-nav-number">4.1.8.</span> <span class="toc-nav-text">锁常用类 ReentrantLock</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E9%94%81%E5%B8%B8%E7%94%A8%E7%B1%BB-ReentrantReadWriteLock"><span class="toc-nav-number">4.1.9.</span> <span class="toc-nav-text">锁常用类 ReentrantReadWriteLock</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E9%94%81%E5%B8%B8%E7%94%A8%E7%B1%BB-StampedLock"><span class="toc-nav-number">4.1.10.</span> <span class="toc-nav-text">锁常用类 StampedLock</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%B7%A5%E5%85%B7%E5%B8%B8%E7%94%A8%E7%B1%BB-CountDownLatch"><span class="toc-nav-number">4.1.11.</span> <span class="toc-nav-text">工具常用类 CountDownLatch</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%B7%A5%E5%85%B7%E5%B8%B8%E7%94%A8%E7%B1%BB-CyclicBarrier"><span class="toc-nav-number">4.1.12.</span> <span class="toc-nav-text">工具常用类 CyclicBarrier</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%B7%A5%E5%85%B7%E5%B8%B8%E7%94%A8%E7%B1%BB-Phaser"><span class="toc-nav-number">4.1.13.</span> <span class="toc-nav-text">工具常用类 Phaser</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%B7%A5%E5%85%B7%E5%B8%B8%E7%94%A8%E7%B1%BB-Semaphore"><span class="toc-nav-number">4.1.14.</span> <span class="toc-nav-text">工具常用类 Semaphore</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%B7%A5%E5%85%B7%E5%B8%B8%E7%94%A8%E7%B1%BB-Exchanger"><span class="toc-nav-number">4.1.15.</span> <span class="toc-nav-text">工具常用类 Exchanger</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Collections-%E5%B9%B6%E5%8F%91%E9%9B%86%E5%90%88"><span class="toc-nav-number">4.2.</span> <span class="toc-nav-text">Collections 并发集合</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Queue-%E2%80%93-ArrayBlockingQueue"><span class="toc-nav-number">4.2.1.</span> <span class="toc-nav-text">Queue – ArrayBlockingQueue</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Queue-%E2%80%93-LinkedBlockingQueue"><span class="toc-nav-number">4.2.2.</span> <span class="toc-nav-text">Queue – LinkedBlockingQueue</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Queue-%E2%80%93-LinkedBlockingDeque"><span class="toc-nav-number">4.2.3.</span> <span class="toc-nav-text">Queue – LinkedBlockingDeque</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Queue-%E2%80%93-ConcurrentLinkedQueue"><span class="toc-nav-number">4.2.4.</span> <span class="toc-nav-text">Queue – ConcurrentLinkedQueue</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Queue-%E2%80%93-ConcurrentLinkedDeque"><span class="toc-nav-number">4.2.5.</span> <span class="toc-nav-text">Queue – ConcurrentLinkedDeque</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Queue-%E2%80%93-DelayQueue"><span class="toc-nav-number">4.2.6.</span> <span class="toc-nav-text">Queue – DelayQueue</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Queue-%E2%80%93-PriorityBlockingQueue"><span class="toc-nav-number">4.2.7.</span> <span class="toc-nav-text">Queue – PriorityBlockingQueue</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Queue-%E2%80%93-SynchronousQueue"><span class="toc-nav-number">4.2.8.</span> <span class="toc-nav-text">Queue – SynchronousQueue</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Queue-%E2%80%93-LinkedTransferQueue"><span class="toc-nav-number">4.2.9.</span> <span class="toc-nav-text">Queue – LinkedTransferQueue</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#List-%E2%80%93-CopyOnWriteArrayList"><span class="toc-nav-number">4.2.10.</span> <span class="toc-nav-text">List – CopyOnWriteArrayList</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Set-%E2%80%93-CopyOnWriteArraySet"><span class="toc-nav-number">4.2.11.</span> <span class="toc-nav-text">Set – CopyOnWriteArraySet</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Set-%E2%80%93-ConcurrentSkipListSet"><span class="toc-nav-number">4.2.12.</span> <span class="toc-nav-text">Set – ConcurrentSkipListSet</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Map-%E2%80%93-ConcurrentHashMap"><span class="toc-nav-number">4.2.13.</span> <span class="toc-nav-text">Map – ConcurrentHashMap</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Map-%E2%80%93-ConcurrentSkipListMap"><span class="toc-nav-number">4.2.14.</span> <span class="toc-nav-text">Map – ConcurrentSkipListMap</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Atomic-%E5%8E%9F%E5%AD%90%E7%B1%BB"><span class="toc-nav-number">4.3.</span> <span class="toc-nav-text">Atomic 原子类</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B-AtomicBoolean%EF%BC%8CAtomicInteger%EF%BC%8CAtomicLong"><span class="toc-nav-number">4.3.1.</span> <span class="toc-nav-text">基础类型 AtomicBoolean，AtomicInteger，AtomicLong</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%95%B0%E7%BB%84-AtomicIntegerArray%EF%BC%8CAtomicLongArray%EF%BC%8CBooleanArray"><span class="toc-nav-number">4.3.2.</span> <span class="toc-nav-text">数组 AtomicIntegerArray，AtomicLongArray，BooleanArray</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%BC%95%E7%94%A8-AtomicReference%EF%BC%8CAtomicMarkedReference%EF%BC%8CAtomicStampedReference"><span class="toc-nav-number">4.3.3.</span> <span class="toc-nav-text">引用 AtomicReference，AtomicMarkedReference，AtomicStampedReference</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#FieldUpdater%EF%BC%9AAtomicLongFieldUpdater%EF%BC%8CAtomicIntegerFieldUpdater%EF%BC%8CAtomicReferenceFieldUpdater"><span class="toc-nav-number">4.3.4.</span> <span class="toc-nav-text">FieldUpdater：AtomicLongFieldUpdater，AtomicIntegerFieldUpdater，AtomicReferenceFieldUpdater</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Executors-%E7%BA%BF%E7%A8%8B%E6%B1%A0"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">Executors 线程池</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%8E%A5%E5%8F%A3-Executor"><span class="toc-nav-number">5.1.</span> <span class="toc-nav-text">接口 Executor</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#ExecutorService"><span class="toc-nav-number">5.2.</span> <span class="toc-nav-text">ExecutorService</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#ScheduledExecutorService"><span class="toc-nav-number">5.3.</span> <span class="toc-nav-text">ScheduledExecutorService</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#AbstractExecutorService"><span class="toc-nav-number">5.4.</span> <span class="toc-nav-text">AbstractExecutorService</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#FutureTask"><span class="toc-nav-number">5.5.</span> <span class="toc-nav-text">FutureTask</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%A0%B8%E5%BF%83-%E2%80%93-ThreadPoolExecutor"><span class="toc-nav-number">5.6.</span> <span class="toc-nav-text">核心 – ThreadPoolExecutor</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%A0%B8%E5%BF%83-%E2%80%93-ScheduledThreadExecutor"><span class="toc-nav-number">5.7.</span> <span class="toc-nav-text">核心 – ScheduledThreadExecutor</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%A0%B8%E5%BF%83-%E2%80%93-Fork-Join-%E6%A1%86%E6%9E%B6"><span class="toc-nav-number">5.8.</span> <span class="toc-nav-text">核心 – Fork&#x2F;Join 框架</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%B7%A5%E5%85%B7%E7%B1%BB-%E2%80%93-Executors"><span class="toc-nav-number">5.9.</span> <span class="toc-nav-text">工具类 –  Executors</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#JUC-%E6%A1%86%E6%9E%B6%E9%87%8D%E7%82%B9%E9%9D%A2%E8%AF%95%E9%A2%98%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">JUC 框架重点面试题详解</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#CAS-%E5%8F%8A%E5%8E%9F%E5%AD%90%E7%B1%BB"><span class="toc-nav-number">6.1.</span> <span class="toc-nav-text">CAS 及原子类</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E9%94%81"><span class="toc-nav-number">6.2.</span> <span class="toc-nav-text">锁</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#LockSupport-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.2.1.</span> <span class="toc-nav-text">LockSupport 详解</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E9%94%81%E6%A0%B8%E5%BF%83%E7%B1%BB-AQS-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.2.2.</span> <span class="toc-nav-text">锁核心类 AQS 详解</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#ReentrantLock-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.2.3.</span> <span class="toc-nav-text">ReentrantLock 详解</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#ReentrantReadWriteLock-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.2.4.</span> <span class="toc-nav-text">ReentrantReadWriteLock 详解</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E9%9B%86%E5%90%88"><span class="toc-nav-number">6.3.</span> <span class="toc-nav-text">集合</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#ConcurrentHashMap-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.3.1.</span> <span class="toc-nav-text">ConcurrentHashMap 详解</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#CopyOnWriteArrayList-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.3.2.</span> <span class="toc-nav-text">CopyOnWriteArrayList 详解</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#ConcurrentLinkedQueue-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.3.3.</span> <span class="toc-nav-text">ConcurrentLinkedQueue 详解</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#BlockingQueue-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.3.4.</span> <span class="toc-nav-text">BlockingQueue 详解</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0"><span class="toc-nav-number">6.4.</span> <span class="toc-nav-text">线程池</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#FutureTask-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.4.1.</span> <span class="toc-nav-text">FutureTask 详解</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#ThreadPoolExecutor-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.4.2.</span> <span class="toc-nav-text">ThreadPoolExecutor 详解</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#ScheduledThreadPool-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.4.3.</span> <span class="toc-nav-text">ScheduledThreadPool 详解</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Fork-Join-%E6%A1%86%E6%9E%B6%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.4.4.</span> <span class="toc-nav-text">Fork&#x2F;Join 框架详解</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-nav-number">6.5.</span> <span class="toc-nav-text">工具类</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#CountDownLatch-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.5.1.</span> <span class="toc-nav-text">CountDownLatch 详解</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#CyclicBarrier-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.5.2.</span> <span class="toc-nav-text">CyclicBarrier 详解</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Semaphore-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.5.3.</span> <span class="toc-nav-text">Semaphore 详解</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Phaser-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.5.4.</span> <span class="toc-nav-text">Phaser 详解</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Exchanger-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.5.5.</span> <span class="toc-nav-text">Exchanger 详解</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#ThreadLocal-%E8%AF%A6%E8%A7%A3"><span class="toc-nav-number">6.5.6.</span> <span class="toc-nav-text">ThreadLocal 详解</span></a></li></ol></li></ol></li></ol>
        
        </div>
      </aside>
    



      <!-- Sidebar Container -->
      <div class="
                col-lg-8 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5>
            <a href="/tags/">FEATURED TAGS</a>
          </h5>
          <div class="tags">
            
            <a class="tag" href="/tags/#JUC" title="JUC">JUC</a>
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
        <hr>
        <h5>FRIENDS</h5>
        <ul class="list-inline">

          
          <li>
            <a href="http://teacherye.com/" target="_blank">Teacher Ye</a>
          </li>
          
          <li>
            <a href="https://goldenaarcher.github.io/" target="_blank">GoldenaArcher</a>
          </li>
          
          <li>
            <a href="https://www.cnblogs.com/guoyinghome/" target="_blank">鸢羽_颖</a>
          </li>
          
          <li>
            <a href="https://cungudafa.top" target="_blank">cungudafa</a>
          </li>
          
          <li>
            <a href="https://www.hm1006.cn" target="_blank">hmblog</a>
          </li>
          
          <li>
            <a href="https://yremp.live" target="_blank">Yremp</a>
          </li>
          
          <li>
            <a href="https://vuial.cn" target="_blank">Vuial</a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</article>



<!-- anchorjs start -->
<!-- async load function -->
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script type="text/javascript">
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function(e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  };
</script>
<script type="text/javascript">
  //anchor-js, Doc:http://bryanbraun.github.io/anchorjs/
  async ("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function() {
    anchors.options = {
      visible: 'hover',
      placement: 'left',
      // icon: 'ℬ'
      icon: '❡'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  });
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

<!-- anchorjs end -->



		<!-- Footer (contains ThemeColor、viewer) -->
		<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          

          
            <li>
              <a target="_blank" href="https://github.com/V-Vincen">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          
            <li>
              <a target="_blank" href="https://twitter.com/V_Vincen_">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          
            <li>
              <a target="_blank" href="https://www.instagram.com/v_vincen_">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          

          

          

          
            <li>
              <a target="_blank" href="http://weibo.com/WVincen">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

        </ul>
        <p class="copyright text-muted">
          Copyright &copy;
          Mr.Vincent
          2021
          <br>
          Theme by
          <a target="_blank" rel="noopener" href="http://beantech.org">BeanTech</a>
          <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
          </span>
          re-Ported by
          <a href="https://v-vincen.life/">Live My Life</a>
          |
          <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=V-Vincen&repo=V-Vincen.github.io&type=star&count=true"></iframe>
        </p>
      </div>
    </div>
  </div>
</footer>

<a id="rocket" href="#top" class=""></a>


  <!-- jQuery -->
  <script src="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/js/jquery.min.js"></script>

  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/js/bootstrap.min.js"></script>

  <!-- Custom Theme JavaScript -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/js/hux-blog.min.js"></script>

  <!-- catalog -->
  <script async="true" type="text/javascript" src="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/js/catalog.js"></script>

  <!-- totop(rocket) -->
  <script async="true" type="text/javascript" src="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/js/totop.js"></script>

  
    <!-- Busuanzi JavaScript -->
    <script async="async" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <!-- Scroll start -->
    <script async="async" type="text/javascript" src="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/js/scroll.js"></script>
    <!-- Scroll end -->
  

  
    <!-- LangSelect start -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/js/langselect.js"></script>
    <!-- LangSelect end -->
  

  
    <!-- Mouseclick -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/js/mouseclick.js"  content='The first step is as good as half over...,Laugh and grow fat...,Man proposes God disposes...,When all else is lost the future still remains...,Wasting time is robbing oneself...,Sharp tools make good work...,Cease to struggle and you cease to live...,A friend in need is a friend indeed...,Faith can move mountains...' color='#9933CC,#339933,#66CCCC,#FF99CC,#CCCCFF,#6666CC,#663399,#66CC99,#FF0033' ></script>
    <!-- Mouseclick -->
  

  
    <!-- ribbon -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/js/ribbonDynamic.js"></script>
  

  




  <!-- CDN: jsdelivr start -->
  <script async="async" type="text/javascript">
    let imgsUrl = document.getElementsByTagName("img");
    let imgUrl = Array.from(imgsUrl);

    let jsdelivr = "https://cdn.jsdelivr.net/gh/";
    let gh = "V-Vincen";
    let ghPages = gh + ".github.io";
    let pagePath = "en/JUC-Java-并发编程知识点梳理/";
    let jsdelivrurl;
    if (pagePath.indexOf("index.html") != -1) {
      jsdelivrurl = jsdelivr + gh + "/" + ghPages;
    } else {
      jsdelivrurl = jsdelivr + gh + "/" + ghPages + "/" + pagePath;
    }
    imgUrl.forEach(item => {
      let oldUrl = item.getAttribute("src");
      let newUrl = oldUrl.replace(oldUrl, jsdelivrurl + oldUrl).replace("..", "");
      item.setAttribute("src", newUrl);
    });
  </script>
  <!-- CDN: jsdelivr end -->



  <!-- viewer start -->
  <!-- viewer start (Picture preview) -->
  
    <script async="async" type="text/javascript" src="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/js/viewer/viewer.min.js"></script>
    <script async="async" type="text/javascript" src="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/js/viewer/pic-viewer.js"></script>
  

  <!-- viewer end -->


<script>
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }

  // fastClick.js
  async ("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
    var $nav = document.querySelector("nav");
    if ($nav)
      FastClick.attach($nav);
    }
  )
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async ("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () { hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if ($('#tag_cloud').length !== 0) { async ("https://v-vincen.life/js/jquery.tagcloud.js", function () { $.fn.tagcloud.defaults = { // size: { start: 1, end: 1, unit: 'em' }, color: {
start: '#bbbbee', end: '#0085a1' } }; $('#tag_cloud a').tagcloud(); }) } </script> -->


		<!-- Search -->
		
		<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="row">
      <!-- <div class="col-md-9 col-md-offset-1"> -->
      <div class="col-lg-9 col-lg-offset-1 col-md-10 col-md-offset-1 local-search-content">

        <div class="local-search-header clearfix">

          <div class="local-search-input-wrapper">
            <span class="search-icon">
              <i class="fa fa-search fa-lg" style="margin: 25px 10px 25px 20px;"></i>
            </span>
            <input autocomplete="off" placeholder="SEARCH..." type="text" id="local-search-input">
          </div>
        </div>
        <div id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>


  
    <script src="https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io/js/ziploader.js"></script>
  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;
    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // get search zip version
    $.get('/searchVersion.json?t=' + (+new Date()), function (res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson() {
      initLoad(['/search.flv'], {
        loadOptions: {
          success: function (obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function (e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions: {
          'json': 'application/json'
        }
      })
    }
    // search function;
    var searchFunc = function (search_id, content_id) {
      'use strict';
      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      // console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function () {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function (data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title
              ? data.title.trim()
              : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content
              ? data.content.trim().replace(/<[^>]+>/g, "")
              : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);

            var date = data.date;
            var dateTime = date.replace(/T/, " ").replace(/.000Z/, "");
            var imgUrl = data.header_img;
            
              imgUrl = 'https://cdn.jsdelivr.net/gh/V-Vincen/V-Vincen.github.io' + imgUrl;
            


            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function (keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0,
                  position = [],
                  index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }
              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }
            // show search results
            if (isMatch) {
              // sort index by position of keyword
              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });
              // merge hits into slices
              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;
                  // move to next position of hit
                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {hits: hits, start: start, end: end, searchTextCount: searchTextCountInSlice};
              }
              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }
              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if (start < 0) {
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if (end > content.length) {
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }
              // sort slices in content by search text's count and hits' count
              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });
              // select top N slices in content
              var upperBound = parseInt('1');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }
              // highlight title and content
              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }
              var resultItem = '';

              // if (slicesOfTitle.length != 0) {   resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>"; } else {   resultItem += "<li><a target='_blank' href='" +
              // articleUrl + "' class='search-result-title'>" + title + "</a>"; } slicesOfContent.forEach(function (slice) {   resultItem += "<a target='_blank' href='" + articleUrl + "'><p class=\"search-result\">" + highlightKeyword(content, slice) +
              // "...</p></a>"; }); resultItem += "</li>";

              if (slicesOfTitle.length != 0) {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</div><time class='search-result-date'>" + dateTime + "</time>";
              } else {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + title + "</div><time class='search-result-date'>" + dateTime + "</time>";
              }
              slicesOfContent.forEach(function (slice) {
                resultItem += "<p class=\"search-result-content\">" + highlightKeyword(content, slice) + "...</p>";
              });
              resultItem += "</div><div class='search-result-right'><img class='media-image' src='" + imgUrl + "' width='64px' height='48px'></img></div></a>";

              resultItems.push({item: resultItem, searchTextCount: searchTextCount, hitCount: hitCount, id: resultItems.length});
            }
          })
        };

        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<div class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</div>";
          resultContent.innerHTML = searchResultList;
        }
      }
      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }
      // remove loading animation
      $('body').css('overflow', '');
      proceedsearch();
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 && $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    document.addEventListener('mouseup', (e) => {
      var _con = document.querySelector(".local-search-content");
      if (_con) {
        if (!_con.contains(e.target)) {
          onPopupClose();
        }
      }
    });
  </script>


		
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</body>
</html>
